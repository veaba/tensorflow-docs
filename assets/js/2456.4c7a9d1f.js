(window.webpackJsonp=window.webpackJsonp||[]).push([[2456],{2644:function(e,t,a){"use strict";a.r(t);var s=a(0),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"class-dynamiclossscale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-dynamiclossscale","aria-hidden":"true"}},[e._v("#")]),e._v(" Class DynamicLossScale")]),e._v(" "),a("p",[e._v("Loss scale that dynamically adjusts itself.\n"),a("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/train/experimental/LossScale",target:"_blank",rel:"noopener noreferrer"}},[e._v("LossScale"),a("OutboundLink")],1),e._v("Inherits From:")]),e._v(" "),a("h3",{attrs:{id:"aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),a("ul",[a("li",[e._v("Class "),a("code",[e._v("tf.compat.v1.train.experimental.DynamicLossScale")])]),e._v(" "),a("li",[e._v("Class "),a("code",[e._v("tf.compat.v2.train.experimental.DynamicLossScale")])])]),e._v(" "),a("p",[e._v("Dynamic loss scaling works by adjusting the loss scale as training progresses. The goal is to keep the loss scale as high as possible without overflowing the gradients. As long as the gradients do not overflow, raising the loss scale never hurts.")]),e._v(" "),a("p",[e._v("The algorithm starts by setting the loss scale to an initial value. Every N steps that the gradients are finite, the loss scale is increased by some factor. However, if a NaN or Inf gradient is found, the gradients for that step are not applied, and the loss scale is decreased by the factor. This process tends to keep the loss scale as high as possible without gradients overflowing.")]),e._v(" "),a("h2",{attrs:{id:"init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),a("strong",[e._v("init")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/experimental/loss_scale.py#L286-L316",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" __init__(\n    initial_loss_scale=(2 ** 15),\n    increment_period=2000,\n    multiplier=2.0\n)\n")])])]),a("p",[e._v("Creates the dynamic loss scale.")]),e._v(" "),a("h4",{attrs:{id:"args"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("initial_loss_scale")]),e._v(": A Python float. The loss scale to use at the beginning. It's better to start this at a very high number, because a loss scale that is too high gets lowered far more quickly than a loss scale that is too low gets raised. The default is 2 ** 15, which is approximately half the maximum float16 value.")]),e._v(" "),a("li",[a("code",[e._v("increment_period")]),e._v(": Increases loss scale every "),a("code",[e._v("increment_period")]),e._v(" consecutive steps that finite gradients are encountered. If a nonfinite gradient is encountered, the count is reset back to zero.")]),e._v(" "),a("li",[a("code",[e._v("multiplier")]),e._v(": The "),a("code",[e._v("multiplier")]),e._v(" to use when increasing or decreasing the loss scale.")])]),e._v(" "),a("h2",{attrs:{id:"properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),a("h3",{attrs:{id:"increment-period"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#increment-period","aria-hidden":"true"}},[e._v("#")]),e._v(" increment_period")]),e._v(" "),a("h3",{attrs:{id:"initial-loss-scale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initial-loss-scale","aria-hidden":"true"}},[e._v("#")]),e._v(" initial_loss_scale")]),e._v(" "),a("h3",{attrs:{id:"multiplier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#multiplier","aria-hidden":"true"}},[e._v("#")]),e._v(" multiplier")]),e._v(" "),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),a("h3",{attrs:{id:"call"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#call","aria-hidden":"true"}},[e._v("#")]),e._v(" "),a("strong",[e._v("call")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/experimental/loss_scale.py#L330-L331",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" __call__()\n")])])]),a("p",[e._v("Returns the current loss scale as a scalar float32 tensor.")]),e._v(" "),a("h3",{attrs:{id:"from-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-config","aria-hidden":"true"}},[e._v("#")]),e._v(" from_config")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/experimental/loss_scale.py#L179-L182",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" from_config(\n    cls,\n    config\n)\n")])])]),a("p",[e._v("Creates the LossScale from its config.")]),e._v(" "),a("h3",{attrs:{id:"get-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-config","aria-hidden":"true"}},[e._v("#")]),e._v(" get_config")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/experimental/loss_scale.py#L393-L398",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" get_config()\n")])])]),a("p",[e._v("Returns the config of this loss scale.")]),e._v(" "),a("h3",{attrs:{id:"update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update","aria-hidden":"true"}},[e._v("#")]),e._v(" update")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/experimental/loss_scale.py#L333-L380",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" update(grads)\n")])])]),a("p",[e._v("Updates loss scale based on if gradients are finite in current step.")])])}),[],!1,null,null,null);t.default=r.exports}}]);