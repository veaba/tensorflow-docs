(window.webpackJsonp=window.webpackJsonp||[]).push([[1303],{1492:function(e,_,v){"use strict";v.r(_);var o=v(0),t=Object(o.a)({},(function(){var e=this,_=e.$createElement,v=e._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[e._v("Generates parsing spec for tf.parse_example to be used with regressors.")]),e._v(" "),v("h3",{attrs:{id:"aliases"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("tf.compat.v2.estimator.regressor_parse_example_spec")])])]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v(" tf.estimator.regressor_parse_example_spec(\n    feature_columns,\n    label_key,\n    label_dtype=tf.dtypes.float32,\n    label_default=None,\n    label_dimension=1,\n    weight_column=None\n)\n")])])]),v("p",[e._v("If users keep data in tf.Example format, they need to call tf.parse_example with a proper feature spec. There are two main things that this utility helps:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("U")]),e._v("s"),v("code",[e._v("e")]),e._v("r"),v("code",[e._v("s")]),e._v(" "),v("code",[e._v("n")]),e._v("e"),v("code",[e._v("e")]),e._v("d"),v("code"),e._v("t"),v("code",[e._v("o")]),e._v(" "),v("code",[e._v("c")]),e._v("o"),v("code",[e._v("m")]),e._v("b"),v("code",[e._v("i")]),e._v("n"),v("code",[e._v("e")]),e._v(" "),v("code",[e._v("p")]),e._v("a"),v("code",[e._v("r")]),e._v("s"),v("code",[e._v("i")]),e._v("n"),v("code",[e._v("g")]),e._v(" "),v("code",[e._v("s")]),e._v("p"),v("code",[e._v("e")]),e._v("c"),v("code"),e._v("o"),v("code",[e._v("f")]),e._v(" "),v("code",[e._v("f")]),e._v("e"),v("code",[e._v("a")]),e._v("t"),v("code",[e._v("u")]),e._v("r"),v("code",[e._v("e")]),e._v("s"),v("code"),e._v("w"),v("code",[e._v("i")]),e._v("t"),v("code",[e._v("h")]),e._v(" "),v("code",[e._v("l")]),e._v("a"),v("code",[e._v("b")]),e._v("e"),v("code",[e._v("l")]),e._v("s"),v("code"),e._v("a"),v("code",[e._v("n")]),e._v("d"),v("code"),e._v("w"),v("code",[e._v("e")]),e._v("i"),v("code",[e._v("g")]),e._v("h"),v("code",[e._v("t")]),e._v("s"),v("code"),e._v("("),v("code",[e._v("i")]),e._v("f"),v("code"),e._v("a"),v("code",[e._v("n")]),e._v("y"),v("code",[e._v(")")]),e._v(" "),v("code",[e._v("s")]),e._v("i"),v("code",[e._v("n")]),e._v("c"),v("code",[e._v("e")]),e._v(" "),v("code",[e._v("t")]),e._v("h"),v("code",[e._v("e")]),e._v("y"),v("code"),e._v("a"),v("code",[e._v("r")]),e._v("e"),v("code"),e._v("a"),v("code",[e._v("l")]),e._v("l"),v("code"),e._v("p"),v("code",[e._v("a")]),e._v("r"),v("code",[e._v("s")]),e._v("e"),v("code",[e._v("d")]),e._v(" "),v("code",[e._v("f")]),e._v("r"),v("code",[e._v("o")]),e._v("m"),v("code"),e._v("s"),v("code",[e._v("a")]),e._v("m"),v("code",[e._v("e")]),e._v(" "),v("code",[e._v("t")]),e._v("f"),v("code",[e._v(".")]),e._v("E"),v("code",[e._v("x")]),e._v("a"),v("code",[e._v("m")]),e._v("p"),v("code",[e._v("l")]),e._v("e"),v("code"),e._v("i"),v("code",[e._v("n")]),e._v("s"),v("code",[e._v("t")]),e._v("a"),v("code",[e._v("n")]),e._v("c"),v("code",[e._v("e")]),e._v("."),v("code"),e._v("T"),v("code",[e._v("h")]),e._v("i"),v("code",[e._v("s")]),e._v(" "),v("code",[e._v("u")]),e._v("t"),v("code",[e._v("i")]),e._v("l"),v("code",[e._v("i")]),e._v("t"),v("code",[e._v("y")]),e._v(" "),v("code",[e._v("c")]),e._v("o"),v("code",[e._v("m")]),e._v("b"),v("code",[e._v("i")]),e._v("n"),v("code",[e._v("e")]),e._v("s"),v("code"),e._v("t"),v("code",[e._v("h")]),e._v("e"),v("code",[e._v("s")]),e._v("e"),v("code"),e._v("s"),v("code",[e._v("p")]),e._v("e"),v("code",[e._v("c")]),e._v("s"),v("code",[e._v(".")])]),e._v(" "),v("li",[e._v("It is difficult to map expected label by a regressor such as "),v("code",[e._v("DNNRegressor")]),e._v(" to corresponding tf.parse_example spec. This utility encodes it by getting related information from users (key, dtype).")])]),e._v(" "),v("p",[e._v("Example output of parsing spec:")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v(' # Define features and transformations\nfeature_b = tf.feature_column.numeric_column(...)\nfeature_c_bucketized = tf.feature_column.bucketized_column(\n  tf.feature_column.numeric_column("feature_c"), ...)\nfeature_a_x_feature_c = tf.feature_column.crossed_column(\n    columns=["feature_a", feature_c_bucketized], ...)\n\nfeature_columns = [feature_b, feature_c_bucketized, feature_a_x_feature_c]\nparsing_spec = tf.estimator.regressor_parse_example_spec(\n    feature_columns, label_key=\'my-label\')\n\n# For the above example, regressor_parse_example_spec would return the dict:\nassert parsing_spec == {\n  "feature_a": parsing_ops.VarLenFeature(tf.string),\n  "feature_b": parsing_ops.FixedLenFeature([1], dtype=tf.float32),\n  "feature_c": parsing_ops.FixedLenFeature([1], dtype=tf.float32)\n  "my-label" : parsing_ops.FixedLenFeature([1], dtype=tf.float32)\n}\n')])])]),v("p",[e._v("Example usage with a regressor:")]),e._v(" "),v("div",{staticClass:"language- extra-class"},[v("pre",{pre:!0,attrs:{class:"language-text"}},[v("code",[e._v(" feature_columns = # define features via tf.feature_column\nestimator = DNNRegressor(\n    hidden_units=[256, 64, 16],\n    feature_columns=feature_columns,\n    weight_column='example-weight',\n    label_dimension=3)\n# This label configuration tells the regressor the following:\n# * weights are retrieved with key 'example-weight'\n# * label is a 3 dimension tensor with float32 dtype.\n\n\n# Input builders\ndef input_fn_train():  # Returns a tuple of features and labels.\n  features = tf.contrib.learn.read_keyed_batch_features(\n      file_pattern=train_files,\n      batch_size=batch_size,\n      # creates parsing configuration for tf.parse_example\n      features=tf.estimator.classifier_parse_example_spec(\n          feature_columns,\n          label_key='my-label',\n          label_dimension=3,\n          weight_column='example-weight'),\n      reader=tf.RecordIOReader)\n   labels = features.pop('my-label')\n   return features, labels\n\nestimator.train(input_fn=input_fn_train)\n")])])]),v("h4",{attrs:{id:"args"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("feature_columns")]),e._v(": An iterable containing all feature columns. All items should be instances of classes derived from "),v("code",[e._v("_FeatureColumn")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("label_key")]),e._v(": A string identifying the label. It means tf.Example stores labels with this key.")]),e._v(" "),v("li",[v("code",[e._v("label_dtype")]),e._v(": A "),v("code",[e._v("tf.dtype")]),e._v(" identifies the type of labels. By default it is "),v("code",[e._v("tf.float32")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("label_default")]),e._v(": used as label if "),v("code",[e._v("label_key")]),e._v(" does not exist in given tf.Example. By default default_value is none, which means "),v("code",[e._v("tf.parse_example")]),e._v(" will error out if there is any missing label.")]),e._v(" "),v("li",[v("code",[e._v("label_dimension")]),e._v(":"),v("code"),e._v("Nu"),v("code",[e._v("m``b``e")]),e._v("r"),v("code",[e._v("``o")]),e._v("f"),v("code"),e._v("r"),v("code",[e._v("e")]),e._v("gr"),v("code",[e._v("e``s``s``i``o``n`` ``t``a")]),e._v("rg"),v("code",[e._v("e``t``s``")]),e._v("p"),v("code",[e._v("e")]),e._v("r"),v("code",[e._v("``e")]),e._v("x"),v("code",[e._v("a``m")]),e._v("p"),v("code",[e._v("l``e")]),e._v("."),v("code"),e._v("T"),v("code",[e._v("h``i``s`` ``i``s`` ``t``h``e`` ``s``i``z``e`` ``o")]),e._v("f"),v("code",[e._v("``t``h``e`` ``l``a``s``t`` ``d``i``m``e``n``s``i``o``n`` ``o")]),e._v("f"),v("code",[e._v("``t``h``e`` ``l``a``b``e``l``s`` ``a``n``d`` ``l``o")]),e._v("g"),v("code",[e._v("i``t``s`` ``Tensor`` ``o``b")]),e._v("j"),v("code",[e._v("e``c``t``s``")]),e._v("("),v("code",[e._v("t")]),e._v("yp"),v("code",[e._v("i``c``a``l``l")]),e._v("y"),v("code",[e._v(",`` ``t``h``e``s``e`` ``h``a")]),e._v("v"),v("code",[e._v("e`` ``s``h``a")]),e._v("p"),v("code",[e._v("e``")]),e._v("["),v("code",[e._v("b``a``t``c``h``_``s``i``z``e``,`` ``label_dimension")]),e._v("]).")]),e._v(" "),v("li",[v("code",[e._v("weight_column")]),e._v(":"),v("code"),e._v("A"),v("code",[e._v("``s``t")]),e._v("r"),v("code",[e._v("i``n")]),e._v("g"),v("code",[e._v("``o")]),e._v("r"),v("code",[e._v("``a`` ``NumericColumn`` ``c")]),e._v("r"),v("code",[e._v("e``a``t``e``d`` ``b")]),e._v("y"),v("code",[e._v("``t")]),e._v("f.f"),v("code",[e._v("e``a``t")]),e._v("ur"),v("code",[e._v("e``_``c``o``l")]),e._v("u"),v("code",[e._v("m``n")]),e._v("."),v("code",[e._v("n")]),e._v("u"),v("code",[e._v("m``e")]),e._v("r"),v("code",[e._v("i``c``_``c``o``l")]),e._v("u"),v("code",[e._v("m``n`` ``d``e")]),e._v("f"),v("code",[e._v("i``n``i``n")]),e._v("g"),v("code"),e._v("f"),v("code",[e._v("e``a``t")]),e._v("ur"),v("code",[e._v("e`` ``c``o``l")]),e._v("u"),v("code",[e._v("m``n``")]),e._v("r"),v("code",[e._v("e")]),e._v("pr"),v("code",[e._v("e``s``e``n``t``i``n")]),e._v("g"),v("code"),e._v("w"),v("code",[e._v("e``i")]),e._v("g"),v("code",[e._v("h``t``s")]),e._v("."),v("code"),e._v("I"),v("code",[e._v("t`` ``i``s``")]),e._v("u"),v("code",[e._v("s``e``d`` ``t``o`` ``d``o")]),e._v("w"),v("code",[e._v("n``")]),e._v("w"),v("code",[e._v("e``i")]),e._v("g"),v("code",[e._v("h``t`` ``o")]),e._v("r"),v("code",[e._v("``b``o``o``s``t`` ``e")]),e._v("x"),v("code",[e._v("a``m")]),e._v("p"),v("code",[e._v("l``e``s`` ``d")]),e._v("ur"),v("code",[e._v("i``n")]),e._v("g"),v("code",[e._v("``t")]),e._v("r"),v("code",[e._v("a``i``n``i``n")]),e._v("g."),v("code"),e._v("I"),v("code",[e._v("t``")]),e._v("w"),v("code",[e._v("i``l``l`` ``b``e`` ``m")]),e._v("u"),v("code",[e._v("l``t``i")]),e._v("p"),v("code",[e._v("l``i``e``d`` ``b")]),e._v("y"),v("code",[e._v("``t``h``e`` ``l``o``s``s`` ``o")]),e._v("f"),v("code",[e._v("``t``h``e`` ``e")]),e._v("x"),v("code",[e._v("a``m")]),e._v("p"),v("code",[e._v("l``e")]),e._v("."),v("code"),e._v("If"),v("code",[e._v("``i``t`` ``i``s`` ``a`` ``s``t")]),e._v("r"),v("code",[e._v("i``n")]),e._v("g"),v("code",[e._v(",`` ``i``t`` ``i``s``")]),e._v("u"),v("code",[e._v("s``e``d`` ``a``s`` ``a``")]),e._v("k"),v("code",[e._v("e")]),e._v("y"),v("code",[e._v("``t``o``")]),e._v("f"),v("code",[e._v("e``t``c``h``")]),e._v("w"),v("code",[e._v("e``i")]),e._v("g"),v("code",[e._v("h``t`` ``t``e``n``s``o")]),e._v("r"),v("code"),e._v("fr"),v("code",[e._v("o``m`` ``t``h``e`` ``features")]),e._v("."),v("code"),e._v("If"),v("code",[e._v("``i``t`` ``i``s`` ``a`` ``NumericColumn``,``")]),e._v("r"),v("code",[e._v("a")]),e._v("w"),v("code",[e._v("``t``e``n``s``o")]),e._v("r"),v("code",[e._v("``i``s``")]),e._v("f"),v("code",[e._v("e``t``c``h``e``d`` ``b")]),e._v("y"),v("code"),e._v("k"),v("code",[e._v("e")]),e._v("y"),v("code",[e._v("``weight_column")]),e._v(".k"),v("code",[e._v("e")]),e._v("y"),v("code",[e._v(",`` ``t``h``e``n`` ``weight_column")]),e._v("."),v("code",[e._v("n``o")]),e._v("r"),v("code",[e._v("m``a``l``i``z``e")]),e._v("r"),v("code",[e._v("_")]),e._v("f"),v("code",[e._v("n`` ``i``s`` ``a")]),e._v("pp"),v("code",[e._v("l``i``e``d`` ``o``n`` ``i``t`` ``t``o``")]),e._v("g"),v("code",[e._v("e``t``")]),e._v("w"),v("code",[e._v("e``i")]),e._v("g"),v("code",[e._v("h``t`` ``t``e``n``s``o")]),e._v("r.")])]),e._v(" "),v("h4",{attrs:{id:"returns"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),v("p",[e._v("A dict mapping each feature key to a FixedLenFeature or VarLenFeature value.")]),e._v(" "),v("h4",{attrs:{id:"raises"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),v("ul",[v("li",[v("code",[e._v("ValueError")]),e._v(": If label is used in "),v("code",[e._v("feature_columns")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("ValueError")]),e._v(": If weight_column is used in "),v("code",[e._v("feature_columns")]),e._v(".")]),e._v(" "),v("li",[v("code",[e._v("ValueError")]),e._v(": If any of the given "),v("code",[e._v("feature_columns")]),e._v(" is not a "),v("code",[e._v("_FeatureColumn")]),e._v(" instance.")]),e._v(" "),v("li",[v("code",[e._v("ValueError")]),e._v(": If "),v("code",[e._v("weight_column")]),e._v(" is not a "),v("code",[e._v("NumericColumn")]),e._v(" instance.")]),e._v(" "),v("li",[v("code",[e._v("ValueError")]),e._v(": if label_key is None.")])])])}),[],!1,null,null,null);_.default=t.exports}}]);