(window.webpackJsonp=window.webpackJsonp||[]).push([[867],{1055:function(e,o,t){"use strict";t.r(o);var s=t(0),r=Object(s.a)({},(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"class-monitoredsession"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-monitoredsession","aria-hidden":"true"}},[e._v("#")]),e._v(" Class MonitoredSession")]),e._v(" "),t("p",[e._v("Session-like object that handles initialization, recovery and hooks.")]),e._v(" "),t("h4",{attrs:{id:"example-usage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Example usage:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" saver_hook = CheckpointSaverHook(...)\nsummary_hook = SummarySaverHook(...)\nwith MonitoredSession(session_creator=ChiefSessionCreator(...),\n                      hooks=[saver_hook, summary_hook]) as sess:\n  while not sess.should_stop():\n    sess.run(train_op)\n")])])]),t("p",[e._v("Initialization: At creation time the monitored session does following things in given order:")]),e._v(" "),t("ul",[t("li",[e._v("calls "),t("code",[e._v("hook.begin")]),e._v("() for each given hook")]),e._v(" "),t("li",[e._v("finalizes the graph via "),t("code",[e._v("scaffold.finalize")]),e._v("()")]),e._v(" "),t("li",[e._v("create session")]),e._v(" "),t("li",[e._v("initializes the model via initialization ops provided by "),t("code",[e._v("Scaffold")])]),e._v(" "),t("li",[e._v("restores variables if a checkpoint exists")]),e._v(" "),t("li",[e._v("launches queue runners")]),e._v(" "),t("li",[e._v("calls "),t("code",[e._v("hook.after_create_session")]),e._v("()")])]),e._v(" "),t("p",[e._v("Run: When run() is called, the monitored session does following things:")]),e._v(" "),t("ul",[t("li",[e._v("calls "),t("code",[e._v("hook.before_run")]),e._v("()")]),e._v(" "),t("li",[e._v("calls TensorFlow "),t("code",[e._v("session.run")]),e._v("() with merged fetches and feed_dict")]),e._v(" "),t("li",[e._v("calls "),t("code",[e._v("hook.after_run")]),e._v("()")]),e._v(" "),t("li",[e._v("returns result of "),t("code",[e._v("session.run")]),e._v("() asked by user")]),e._v(" "),t("li",[e._v("if "),t("code",[e._v("AbortedError")]),e._v(" or "),t("code",[e._v("UnavailableError")]),e._v(" occurs, it recovers or reinitializes the session before executing the run() call again")])]),e._v(" "),t("p",[e._v("Exit: At the close(), the monitored session does following things in order:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("calls "),t("code",[e._v("hook.end")]),e._v("()")])]),e._v(" "),t("li",[t("p",[e._v("closes the queue runners and the session")])]),e._v(" "),t("li",[t("p",[e._v("suppresses "),t("code",[e._v("OutOfRange")]),e._v(" error which indicates that all inputs have been processed if the monitored_session is used as a context\n"),t("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/compat/v1/Session",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.compat.v1.Session"),t("OutboundLink")],1),e._v("How to set  arguments:")])]),e._v(" "),t("li",[t("p",[t("code",[e._v("I")]),e._v("n"),t("code"),e._v("m"),t("code",[e._v("o")]),e._v("s"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("c")]),e._v("a"),t("code",[e._v("s")]),e._v("e"),t("code",[e._v("s")]),e._v(" "),t("code",[e._v("y")]),e._v("o"),t("code",[e._v("u")]),e._v(" "),t("code",[e._v("c")]),e._v("a"),t("code",[e._v("n")]),e._v(" "),t("code",[e._v("s")]),e._v("e"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("s")]),e._v("e"),t("code",[e._v("s")]),e._v("s"),t("code",[e._v("i")]),e._v("o"),t("code",[e._v("n")]),e._v(" "),t("code",[e._v("a")]),e._v("r"),t("code",[e._v("g")]),e._v("u"),t("code",[e._v("m")]),e._v("e"),t("code",[e._v("n")]),e._v("t"),t("code",[e._v("s")]),e._v(" "),t("code",[e._v("a")]),e._v("s"),t("code"),e._v("f"),t("code",[e._v("o")]),e._v("l"),t("code",[e._v("l")]),e._v("o"),t("code",[e._v("w")]),e._v("s"),t("code",[e._v(":")])])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" MonitoredSession(\n  session_creator=ChiefSessionCreator(master=..., config=...))\n")])])]),t("ul",[t("li",[t("code",[e._v("I")]),e._v("n"),t("code"),e._v("d"),t("code",[e._v("i")]),e._v("s"),t("code",[e._v("t")]),e._v("r"),t("code",[e._v("i")]),e._v("b"),t("code",[e._v("u")]),e._v("t"),t("code",[e._v("e")]),e._v("d"),t("code"),e._v("s"),t("code",[e._v("e")]),e._v("t"),t("code",[e._v("t")]),e._v("i"),t("code",[e._v("n")]),e._v("g"),t("code"),e._v("f"),t("code",[e._v("o")]),e._v("r"),t("code"),e._v("a"),t("code"),e._v("n"),t("code",[e._v("o")]),e._v("n"),t("code",[e._v("-")]),e._v("c"),t("code",[e._v("h")]),e._v("i"),t("code",[e._v("e")]),e._v("f"),t("code"),e._v("w"),t("code",[e._v("o")]),e._v("r"),t("code",[e._v("k")]),e._v("e"),t("code",[e._v("r")]),e._v(","),t("code"),e._v("y"),t("code",[e._v("o")]),e._v("u"),t("code"),e._v("c"),t("code",[e._v("a")]),e._v("n"),t("code"),e._v("u"),t("code",[e._v("s")]),e._v("e"),t("code"),e._v("f"),t("code",[e._v("o")]),e._v("l"),t("code",[e._v("l")]),e._v("o"),t("code",[e._v("w")]),e._v("i"),t("code",[e._v("n")]),e._v("g"),t("code",[e._v(":")])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" MonitoredSession(\n  session_creator=WorkerSessionCreator(master=..., config=...))\n")])])]),t("p",[e._v("See MonitoredTrainingSession for an example usage based on chief or worker.")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("i")]),e._v("t"),t("code"),e._v("c"),t("code",[e._v("a")]),e._v("n"),t("code",[e._v("n")]),e._v("o"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("b")]),e._v("e"),t("code"),e._v("s"),t("code",[e._v("e")]),e._v("t"),t("code"),e._v("a"),t("code",[e._v("s")]),e._v(" "),t("code",[e._v("d")]),e._v("e"),t("code",[e._v("f")]),e._v("a"),t("code",[e._v("u")]),e._v("l"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("s")]),e._v("e"),t("code",[e._v("s")]),e._v("s"),t("code",[e._v("i")]),e._v("o"),t("code",[e._v("n")]),e._v(".``")]),e._v(" "),t("li",[t("code",[e._v("i")]),e._v("t"),t("code"),e._v("c"),t("code",[e._v("a")]),e._v("n"),t("code",[e._v("n")]),e._v("o"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("b")]),e._v("e"),t("code"),e._v("s"),t("code",[e._v("e")]),e._v("n"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("t")]),e._v("o"),t("code"),e._v("s"),t("code",[e._v("a")]),e._v("v"),t("code",[e._v("e")]),e._v("r"),t("code",[e._v(".")]),e._v("s"),t("code",[e._v("a")]),e._v("v"),t("code",[e._v("e")]),e._v(".``")]),e._v(" "),t("li",[t("code",[e._v("i")]),e._v("t"),t("code"),e._v("c"),t("code",[e._v("a")]),e._v("n"),t("code",[e._v("n")]),e._v("o"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("b")]),e._v("e"),t("code"),e._v("s"),t("code",[e._v("e")]),e._v("n"),t("code",[e._v("t")]),e._v(" "),t("code",[e._v("t")]),e._v("o"),t("code"),e._v("t"),t("code",[e._v("f")]),e._v("."),t("code",[e._v("t")]),e._v("r"),t("code",[e._v("a")]),e._v("i"),t("code",[e._v("n")]),e._v("."),t("code",[e._v("s")]),e._v("t"),t("code",[e._v("a")]),e._v("r"),t("code",[e._v("t")]),t("em",[t("code",[e._v("q")]),e._v("u"),t("code",[e._v("e")]),e._v("u"),t("code",[e._v("e")])]),t("code",[e._v("r")]),e._v("u"),t("code",[e._v("n")]),e._v("n"),t("code",[e._v("e")]),e._v("r"),t("code",[e._v("s")]),e._v(".``")])]),e._v(" "),t("h4",{attrs:{id:"args"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("session_creator")]),e._v(": A factory object to create session. Typically a "),t("code",[e._v("ChiefSessionCreator")]),e._v(" which is the default one.")]),e._v(" "),t("li",[t("code",[e._v("hooks")]),e._v(": An iterable of `SessionRunHook' objects.")])]),e._v(" "),t("h4",{attrs:{id:"returns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("A MonitoredSession object.")]),e._v(" "),t("h2",{attrs:{id:"init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("init")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L1006-L1014",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" __init__(\n    session_creator=None,\n    hooks=None,\n    stop_grace_period_secs=120\n)\n")])])]),t("p",[e._v("Sets up a Monitored or Hooked Session.")]),e._v(" "),t("h4",{attrs:{id:"args-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("session_creator")]),e._v(": A factory object to create session. Typically a "),t("code",[e._v("ChiefSessionCreator")]),e._v(" or a "),t("code",[e._v("WorkerSessionCreator")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("hooks")]),e._v(": An iterable of `SessionRunHook' objects.")]),e._v(" "),t("li",[t("code",[e._v("should_recover")]),e._v(": A bool. Indicates whether to recover from "),t("code",[e._v("AbortedError")]),e._v(" and "),t("code",[e._v("UnavailableError")]),e._v(" or not.")]),e._v(" "),t("li",[t("code",[e._v("stop_grace_period_secs")]),e._v(": Number of seconds given to threads to stop after "),t("code",[e._v("close")]),e._v("() has been called.")])]),e._v(" "),t("h2",{attrs:{id:"child-classes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#child-classes","aria-hidden":"true"}},[e._v("#")]),e._v(" Child Classes")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/compat/v1/train/MonitoredSession/StepContext",target:"_blank",rel:"noopener noreferrer"}},[e._v("class StepContext"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),t("h3",{attrs:{id:"graph"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#graph","aria-hidden":"true"}},[e._v("#")]),e._v(" graph")]),e._v(" "),t("p",[e._v("The graph that was launched in this session.")]),e._v(" "),t("h2",{attrs:{id:"methods"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),t("h3",{attrs:{id:"enter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enter","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("enter")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L855-L856",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" __enter__()\n")])])]),t("h3",{attrs:{id:"exit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exit","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("exit")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L858-L863",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" __exit__(\n    exception_type,\n    exception_value,\n    traceback\n)\n")])])]),t("h3",{attrs:{id:"close"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#close","aria-hidden":"true"}},[e._v("#")]),e._v(" close")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L852-L853",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" close()\n")])])]),t("h3",{attrs:{id:"run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run","aria-hidden":"true"}},[e._v("#")]),e._v(" run")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L736-L754",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" run(\n    fetches,\n    feed_dict=None,\n    options=None,\n    run_metadata=None\n)\n")])])]),t("p",[e._v("Run ops in the monitored session.")]),e._v(" "),t("p",[e._v("This method is completely compatible with the tf.Session.run() method.")]),e._v(" "),t("h4",{attrs:{id:"args-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("fetches")]),e._v(": Same as "),t("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),t("li",[t("code",[e._v("feed_dict")]),e._v(": Same as "),t("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),t("li",[t("code",[e._v("options")]),e._v(": Same as "),t("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),t("li",[t("code",[e._v("run_metadata")]),e._v(": Same as "),t("code",[e._v("tf.Session.run")]),e._v("().")])]),e._v(" "),t("h4",{attrs:{id:"returns-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("Same as tf.Session.run().")]),e._v(" "),t("h3",{attrs:{id:"run-step-fn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#run-step-fn","aria-hidden":"true"}},[e._v("#")]),e._v(" run_step_fn")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L756-L810",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" run_step_fn(step_fn)\n")])])]),t("p",[e._v("Run ops using a step function.")]),e._v(" "),t("h4",{attrs:{id:"args-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-4","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("step_fn")]),e._v(": A function or a method with a single argument of type "),t("code",[e._v("StepContext")]),e._v(". The function may use methods of the argument to perform computations with access to a raw session. The returned value of the "),t("code",[e._v("step_fn")]),e._v(" will be returned from "),t("code",[e._v("run_step_fn")]),e._v(", unless a stop is requested. In that case, the next "),t("code",[e._v("should_stop")]),e._v(" call will return True. Example usage:")])]),e._v(" "),t("h4",{attrs:{id:"returns-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("Returns the returned value of step_fn.")]),e._v(" "),t("h4",{attrs:{id:"raises"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("StopIteration")]),e._v(": if "),t("code",[e._v("step_fn")]),e._v(" has called "),t("code",[e._v("request_stop")]),e._v("(). It may be caught by "),t("code",[e._v("with tf.MonitoredSession")]),e._v("() to close the session.")]),e._v(" "),t("li",[t("code",[e._v("ValueError")]),e._v(": if "),t("code",[e._v("step_fn")]),e._v(" doesn't have a single argument called "),t("code",[e._v("step_context")]),e._v(". It may also optionally have "),t("code",[e._v("self")]),e._v(" for cases when it belongs to an object.")])]),e._v(" "),t("h3",{attrs:{id:"should-stop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#should-stop","aria-hidden":"true"}},[e._v("#")]),e._v(" should_stop")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L849-L850",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" should_stop()\n")])])])])}),[],!1,null,null,null);o.default=r.exports}}]);