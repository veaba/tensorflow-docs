(window.webpackJsonp=window.webpackJsonp||[]).push([[1259],{1448:function(e,t,a){"use strict";a.r(t);var _=a(0),o=Object(_.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"class-multihead"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-multihead","aria-hidden":"true"}},[e._v("#")]),e._v(" Class MultiHead")]),e._v(" "),a("p",[e._v("Creates a Head for multi-objective learning.\n"),a("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/estimator/Head",target:"_blank",rel:"noopener noreferrer"}},[e._v("Head"),a("OutboundLink")],1),e._v("Inherits From:")]),e._v(" "),a("h3",{attrs:{id:"aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),a("ul",[a("li",[e._v("Class "),a("code",[e._v("tf.compat.v1.estimator.MultiHead")])]),e._v(" "),a("li",[e._v("Class "),a("code",[e._v("tf.compat.v2.estimator.MultiHead")])])]),e._v(" "),a("p",[e._v("This class merges the output of multiple Head objects. Specifically:")]),e._v(" "),a("ul",[a("li",[e._v("For training, sums losses of each head, calls "),a("code",[e._v("train_op_fn")]),e._v(" with this final loss.")]),e._v(" "),a("li",[e._v("For eval, merges metrics by adding "),a("code",[e._v("head.name")]),e._v(" suffix to the keys in eval metrics, such as "),a("code",[e._v("precision/head1.name")]),e._v(", "),a("code",[e._v("precision/head2.name")]),e._v(".")]),e._v(" "),a("li",[e._v("For prediction, merges predictions and updates keys in prediction dict to a 2-tuple, ("),a("code",[e._v("head.name")]),e._v(", prediction_key). Merges "),a("code",[e._v("export_outputs")]),e._v(" such that by default the first head is served.")])]),e._v(" "),a("h4",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Usage:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" # In `input_fn`, specify labels as a dict keyed by head name:\ndef input_fn():\n  features = ...\n  labels1 = ...\n  labels2 = ...\n  return features, {'head1.name': labels1, 'head2.name': labels2}\n\n# In `model_fn`, specify logits as a dict keyed by head name:\ndef model_fn(features, labels, mode):\n  # Create simple heads and specify head name.\n  head1 = tf.estimator.MultiClassHead(n_classes=3, name='head1')\n  head2 = tf.estimator.BinaryClassHead(name='head2')\n  # Create MultiHead from two simple heads.\n  head = tf.estimator.MultiHead([head1, head2])\n  # Create logits for each head, and combine them into a dict.\n  logits1, logits2 = logit_fn()\n  logits = {'head1.name': logits1, 'head2.name': logits2}\n  # Return the merged EstimatorSpec\n  return head.create_estimator_spec(..., logits=logits, ...)\n\n# Create an estimator with this model_fn.\nestimator = tf.estimator.Estimator(model_fn=model_fn)\nestimator.train(input_fn=input_fn)\n")])])]),a("p",[e._v("Also supports logits as a Tensor of shape [D0, D1, ... DN, logits_dimension]. It will split the Tensor along the last dimension and distribute it appropriately among the heads. E.g.:")]),e._v(" "),a("h1",{attrs:{id:"input-logits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-logits","aria-hidden":"true"}},[e._v("#")]),e._v(" Input logits.")]),e._v(" "),a("h1",{attrs:{id:"logits-np-array-1-1-2-2-2-1-5-1-3-2-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logits-np-array-1-1-2-2-2-1-5-1-3-2-2","aria-hidden":"true"}},[e._v("#")]),e._v(" logits = np.array([[-1., 1., 2., -2., 2.], [-1.5, 1., -3., 2., -2.]],")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("                 dtype=np.float32)\n")])])]),a("h1",{attrs:{id:"suppose-head1-logits-dimension-2-and-head2-logits-dimension-3-after"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#suppose-head1-logits-dimension-2-and-head2-logits-dimension-3-after","aria-hidden":"true"}},[e._v("#")]),e._v(" Suppose head1.logits_dimension = 2 and head2.logits_dimension = 3. After")]),e._v(" "),a("h1",{attrs:{id:"splitting-the-result-is"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#splitting-the-result-is","aria-hidden":"true"}},[e._v("#")]),e._v(" splitting, the result is:")]),e._v(" "),a("h1",{attrs:{id:"logits-dict-head1-name-1-1-1-5-1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logits-dict-head1-name-1-1-1-5-1","aria-hidden":"true"}},[e._v("#")]),e._v(" logits_dict = {'head1_name': [[-1., 1.], [-1.5, 1.]],")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("              'head2_name':  [[2., -2., 2.], [-3., 2., -2.]]}\n")])])]),a("p",[e._v("Usage:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" def model_fn(features, labels, mode):\n  # Create simple heads and specify head name.\n  head1 = tf.estimator.MultiClassHead(n_classes=3, name='head1')\n  head2 = tf.estimator.BinaryClassHead(name='head2')\n  # Create multi-head from two simple heads.\n  head = tf.estimator.MultiHead([head1, head2])\n  # Create logits for the multihead. The result of logits is a `Tensor`.\n  logits = logit_fn(logits_dimension=head.logits_dimension)\n  # Return the merged EstimatorSpec\n  return head.create_estimator_spec(..., logits=logits, ...)\n")])])]),a("h4",{attrs:{id:"args"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("heads")]),e._v(": List or tuple of "),a("code",[e._v("Head")]),e._v(" instances. All "),a("code",[e._v("heads")]),e._v(" must have "),a("code",[e._v("name")]),e._v(" specified. The first head in the list is the default used at serving time.")]),e._v(" "),a("li",[a("code",[e._v("head_weights")]),e._v(": Optional list of weights, same length as "),a("code",[e._v("heads")]),e._v(". Used when merging losses to calculate the weighted sum of losses from each head. If "),a("code",[e._v("None")]),e._v(", all losses are weighted equally.")])]),e._v(" "),a("h2",{attrs:{id:"init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),a("strong",[e._v("init")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" __init__(\n    heads,\n    head_weights=None\n)\n")])])]),a("p",[e._v("Initialize self. See help(type(self)) for accurate signature.")]),e._v(" "),a("h2",{attrs:{id:"properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),a("h3",{attrs:{id:"logits-dimension"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logits-dimension","aria-hidden":"true"}},[e._v("#")]),e._v(" logits_dimension")]),e._v(" "),a("p",[e._v("See base_head.Head for details.")]),e._v(" "),a("h3",{attrs:{id:"loss-reduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loss-reduction","aria-hidden":"true"}},[e._v("#")]),e._v(" loss_reduction")]),e._v(" "),a("p",[e._v("See base_head.Head for details.")]),e._v(" "),a("h3",{attrs:{id:"name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name","aria-hidden":"true"}},[e._v("#")]),e._v(" name")]),e._v(" "),a("p",[e._v("See base_head.Head for details.")]),e._v(" "),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),a("h3",{attrs:{id:"create-estimator-spec"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-estimator-spec","aria-hidden":"true"}},[e._v("#")]),e._v(" create_estimator_spec")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" create_estimator_spec(\n    features,\n    mode,\n    logits,\n    labels=None,\n    optimizer=None,\n    trainable_variables=None,\n    train_op_fn=None,\n    update_ops=None,\n    regularization_losses=None\n)\n")])])]),a("p",[e._v("Returns a model_fn.EstimatorSpec.")]),e._v(" "),a("h4",{attrs:{id:"args-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#args-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("features")]),e._v(": Input "),a("code",[e._v("dict")]),e._v(" of "),a("code",[e._v("Tensor")]),e._v(" or "),a("code",[e._v("SparseTensor")]),e._v(" objects.")]),e._v(" "),a("li",[a("code",[e._v("mode")]),e._v(": Estimator's "),a("code",[e._v("ModeKeys")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("logits")]),e._v(":"),a("code"),e._v("I"),a("code",[e._v("n")]),e._v("pu"),a("code",[e._v("t`` ``dict``")]),e._v("k"),a("code",[e._v("e")]),e._v("y"),a("code",[e._v("e``d`` ``b")]),e._v("y"),a("code",[e._v("``h``e``a``d`` ``n``a``m``e``,`` ``o")]),e._v("r"),a("code",[e._v("``logits`` ``Tensor``")]),e._v("w"),a("code",[e._v("i``t``h`` ``s``h``a")]),e._v("p"),a("code",[e._v("e``")]),e._v("["),a("code",[e._v("D``0``,`` ``D``1``,`` ``.``.``.`` ``D``N``,`` ``logits``_``d``i``m``e``n``s``i``o``n")]),e._v("]"),a("code",[e._v(".``")]),e._v("F"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``m``a``n")]),e._v("y"),a("code",[e._v("``a")]),e._v("pp"),a("code",[e._v("l``i``c``a``t``i``o``n``s``,`` ``t``h``e`` ``Tensor`` ``s``h``a")]),e._v("p"),a("code",[e._v("e`` ``i``s``")]),e._v("["),a("code",[e._v("b``a``t``c``h``_``s``i``z``e``,`` ``logits``_``d``i``m``e``n``s``i``o``n")]),e._v("]"),a("code",[e._v(".``")]),e._v("If"),a("code",[e._v("``logits`` ``i``s`` ``a`` ``Tensor``,`` ``i``t``")]),e._v("w"),a("code",[e._v("i``l``l`` ``s")]),e._v("p"),a("code",[e._v("l``i``t`` ``t``h``e`` ``Tensor`` ``a``l``o``n``g`` ``t``h``e`` ``l``a``s``t`` ``d``i``m``e``n``s``i``o``n`` ``a``n``d`` ``d``i``s``t")]),e._v("r"),a("code",[e._v("i``b")]),e._v("u"),a("code",[e._v("t``e`` ``i``t`` ``a")]),e._v("ppr"),a("code",[e._v("o")]),e._v("pr"),a("code",[e._v("i``a``t``e``l")]),e._v("y"),a("code",[e._v("``a``m``o``n``g`` ``t``h``e`` ``h``e``a``d``s``.``")]),e._v("C"),a("code",[e._v("h``e``c")]),e._v("k"),a("code",[e._v("``MultiHead``")]),e._v("f"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``e")]),e._v("x"),a("code",[e._v("a``m")]),e._v("p"),a("code",[e._v("l``e``s``.")])]),e._v(" "),a("li",[a("code",[e._v("l``a``b``e``l``s")]),e._v(":"),a("code"),e._v("I"),a("code",[e._v("n")]),e._v("pu"),a("code",[e._v("t`` ``dict``")]),e._v("k"),a("code",[e._v("e")]),e._v("y"),a("code",[e._v("e``d`` ``b")]),e._v("y"),a("code",[e._v("``h``e``a``d`` ``n``a``m``e``.``")]),e._v("F"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``e``a``c``h`` ``h``e``a``d``,`` ``t``h``e`` ``l``a``b``e``l``")]),e._v("v"),a("code",[e._v("a``l")]),e._v("u"),a("code",[e._v("e`` ``c``a``n`` ``b``e`` ``i``n``t``e``g``e")]),e._v("r"),a("code",[e._v("``o")]),e._v("r"),a("code",[e._v("``s``t")]),e._v("r"),a("code",[e._v("i``n``g`` ``Tensor``")]),e._v("w"),a("code",[e._v("i``t``h`` ``s``h``a")]),e._v("p"),a("code",[e._v("e`` ``m``a``t``c``h``i``n``g`` ``i``t``s`` ``c``o")]),e._v("rr"),a("code",[e._v("e``s")]),e._v("p"),a("code",[e._v("o``n``d``i``n``g`` ``logits``.``l``a``b``e``l``s`` ``i``s`` ``a``")]),e._v("r"),a("code",[e._v("e")]),e._v("qu"),a("code",[e._v("i")]),e._v("r"),a("code",[e._v("e``d`` ``a")]),e._v("r"),a("code",[e._v("g")]),e._v("u"),a("code",[e._v("m``e``n``t``")]),e._v("w"),a("code",[e._v("h``e``n`` ``mode`` ``e")]),e._v("qu"),a("code",[e._v("a``l``s`` ``TRAIN`` ``o")]),e._v("r"),a("code",[e._v("``EVAL``.")])]),e._v(" "),a("li",[a("code",[e._v("o")]),e._v("p"),a("code",[e._v("t``i``m``i``z``e")]),e._v("r:"),a("code"),e._v("A"),a("code",[e._v("n`` ``t")]),e._v("f"),a("code",[e._v(".")]),e._v("k"),a("code",[e._v("e")]),e._v("r"),a("code",[e._v("a``s``.``o")]),e._v("p"),a("code",[e._v("t``i``m``i``z``e")]),e._v("r"),a("code",[e._v("s``.")]),e._v("Op"),a("code",[e._v("t``i``m``i``z``e")]),e._v("r"),a("code",[e._v("``i``n``s``t``a``n``c``e`` ``t``o`` ``o")]),e._v("p"),a("code",[e._v("t``i``m``i``z``e`` ``t``h``e`` ``l``o``s``s`` ``i``n`` ``TRAIN`` ``mode``.`` ``N``a``m``e``l")]),e._v("y"),a("code",[e._v(",`` ``s``e``t``s`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``_``o")]),e._v("p"),a("code"),e._v("="),a("code",[e._v("``o")]),e._v("p"),a("code",[e._v("t``i``m``i``z``e")]),e._v("r"),a("code",[e._v(".``g``e``t``_")]),e._v("up"),a("code",[e._v("d``a``t``e``s")]),e._v("("),a("code",[e._v("l``o``s``s``,`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``a``b``l``e``_")]),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``b``l``e``s")]),e._v(")"),a("code",[e._v(",``")]),e._v("w"),a("code",[e._v("h``i``c``h``")]),e._v("up"),a("code",[e._v("d``a``t``e``s``")]),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``b``l``e``s`` ``t``o`` ``m``i``n``i``m``i``z``e`` ``l``o``s``s``.")])]),e._v(" "),a("li",[a("code",[e._v("t")]),e._v("r"),a("code",[e._v("a``i``n``a``b``l``e``_")]),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``b``l``e``s")]),e._v(":"),a("code"),e._v("A"),a("code",[e._v("``l``i``s``t`` ``o")]),e._v("r"),a("code",[e._v("``t")]),e._v("up"),a("code",[e._v("l``e`` ``o")]),e._v("f"),a("code",[e._v("``Variable`` ``o``b")]),e._v("j"),a("code",[e._v("e``c``t``s`` ``t``o``")]),e._v("up"),a("code",[e._v("d``a``t``e`` ``t``o`` ``m``i``n``i``m``i``z``e`` ``l``o``s``s``.``")]),e._v("I"),a("code",[e._v("n`` ``Tensor")]),e._v("f"),a("code",[e._v("l``o")]),e._v("w"),a("code",[e._v("``1``.")]),e._v("x"),a("code",[e._v(",`` ``b")]),e._v("y"),a("code",[e._v("``d``e")]),e._v("f"),a("code",[e._v("a")]),e._v("u"),a("code",[e._v("l``t`` ``t``h``e``s``e`` ``a")]),e._v("r"),a("code",[e._v("e`` ``t``h``e`` ``l``i``s``t`` ``o")]),e._v("f"),a("code"),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``b``l``e``s`` ``c``o``l``l``e``c``t``e``d`` ``i``n`` ``t``h``e`` ``g")]),e._v("r"),a("code",[e._v("a")]),e._v("p"),a("code",[e._v("h``")]),e._v("u"),a("code",[e._v("n``d``e")]),e._v("r"),a("code",[e._v("``t``h``e``")]),e._v("k"),a("code",[e._v("e")]),e._v("y"),a("code",[e._v("``GraphKeys.TRAINABLE_VARIABLES``.``")]),e._v("A"),a("code",[e._v("s`` ``Tensor")]),e._v("f"),a("code",[e._v("l``o")]),e._v("w"),a("code"),e._v("2"),a("code",[e._v(".")]),e._v("x"),a("code",[e._v("``d``o``e``s``n")]),e._v("'"),a("code",[e._v("t`` ``h``a")]),e._v("v"),a("code",[e._v("e`` ``c``o``l``l``e``c``t``i``o``n``s`` ``a``n``d``")]),e._v("Gr"),a("code",[e._v("a")]),e._v("p"),a("code",[e._v("h")]),e._v("K"),a("code",[e._v("e")]),e._v("y"),a("code",[e._v("s``,`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``a``b``l``e``_")]),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``b``l``e``s`` ``n``e``e``d`` ``t``o`` ``b``e``")]),e._v("p"),a("code",[e._v("a``s``s``e``d`` ``e")]),e._v("xp"),a("code",[e._v("l``i``c``i``t``l")]),e._v("y"),a("code",[e._v("``h``e")]),e._v("r"),a("code",[e._v("e``.")])]),e._v(" "),a("li",[a("code",[e._v("t")]),e._v("r"),a("code",[e._v("a``i``n``_``o")]),e._v("p"),a("code",[e._v("_")]),e._v("f"),a("code",[e._v("n")]),e._v(":"),a("code"),e._v("Fu"),a("code",[e._v("n``c``t``i``o``n`` ``t``h``a``t`` ``t``a")]),e._v("k"),a("code",[e._v("e``s`` ``a`` ``s``c``a``l``a")]),e._v("r"),a("code",[e._v("``l``o``s``s`` ``Tensor`` ``a``n``d``")]),e._v("r"),a("code",[e._v("e``t")]),e._v("ur"),a("code",[e._v("n``s`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``_``o")]),e._v("p"),a("code",[e._v(".``")]),e._v("U"),a("code",[e._v("s``e``d`` ``i")]),e._v("f"),a("code",[e._v("``o")]),e._v("p"),a("code",[e._v("t``i``m``i``z``e")]),e._v("r"),a("code",[e._v("``i``s`` ``N``o``n``e``.")])]),e._v(" "),a("li",[a("code",[e._v("update_ops")]),e._v(":"),a("code"),e._v("A"),a("code",[e._v("``l``i``s``t`` ``o")]),e._v("r"),a("code",[e._v("``t")]),e._v("up"),a("code",[e._v("l``e`` ``o")]),e._v("f"),a("code"),e._v("up"),a("code",[e._v("d``a``t``e`` ``o")]),e._v("p"),a("code",[e._v("s`` ``t``o`` ``b``e``")]),e._v("ru"),a("code",[e._v("n`` ``a``t`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``i``n``g`` ``t``i``m``e``.``")]),e._v("F"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``e")]),e._v("x"),a("code",[e._v("a``m")]),e._v("p"),a("code",[e._v("l``e``,`` ``l``a")]),e._v("y"),a("code",[e._v("e")]),e._v("r"),a("code",[e._v("s`` ``s")]),e._v("u"),a("code",[e._v("c``h`` ``a``s``")]),e._v("B"),a("code",[e._v("a``t``c``h``N``o")]),e._v("r"),a("code",[e._v("m``a``l``i``z``a``t``i``o``n`` ``c")]),e._v("r"),a("code",[e._v("e``a``t``e`` ``m``e``a``n`` ``a``n``d``")]),e._v("v"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("i``a``n``c``e``")]),e._v("up"),a("code",[e._v("d``a``t``e`` ``o")]),e._v("p"),a("code",[e._v("s`` ``t``h``a``t`` ``n``e``e``d`` ``t``o`` ``b``e``")]),e._v("ru"),a("code",[e._v("n`` ``a``t`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``i``n``g`` ``t``i``m``e``.``")]),e._v("I"),a("code",[e._v("n`` ``Tensor")]),e._v("f"),a("code",[e._v("l``o")]),e._v("w"),a("code",[e._v("``1``.")]),e._v("x"),a("code",[e._v(",`` ``t``h``e``s``e`` ``a")]),e._v("r"),a("code",[e._v("e`` ``t``h")]),e._v("r"),a("code",[e._v("o")]),e._v("w"),a("code",[e._v("n`` ``i``n``t``o`` ``a``n``")]),e._v("UP"),a("code",[e._v("D")]),e._v("ATE"),a("code",[e._v("_")]),e._v("OPS"),a("code",[e._v("``c``o``l``l``e``c``t``i``o``n``.``")]),e._v("A"),a("code",[e._v("s`` ``Tensor")]),e._v("f"),a("code",[e._v("l``o")]),e._v("w"),a("code"),e._v("2"),a("code",[e._v(".")]),e._v("x"),a("code",[e._v("``d``o``e``s``n")]),e._v("'"),a("code",[e._v("t`` ``h``a")]),e._v("v"),a("code",[e._v("e`` ``c``o``l``l``e``c``t``i``o``n``s``,`` ``update_ops`` ``n``e``e``d`` ``t``o`` ``b``e``")]),e._v("p"),a("code",[e._v("a``s``s``e``d`` ``e")]),e._v("xp"),a("code",[e._v("l``i``c``i``t``l")]),e._v("y"),a("code",[e._v("``h``e")]),e._v("r"),a("code",[e._v("e``.")])]),e._v(" "),a("li",[a("code",[e._v("regularization_losses")]),e._v(":"),a("code"),e._v("A"),a("code",[e._v("``l``i``s``t`` ``o")]),e._v("f"),a("code",[e._v("``a``d``d``i``t``i``o``n``a``l`` ``s``c``a``l``a")]),e._v("r"),a("code",[e._v("``l``o``s``s``e``s`` ``t``o`` ``b``e`` ``a``d``d``e``d`` ``t``o`` ``t``h``e`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``i``n``g`` ``l``o``s``s``,`` ``s")]),e._v("u"),a("code",[e._v("c``h`` ``a``s``")]),e._v("r"),a("code",[e._v("e``g")]),e._v("u"),a("code",[e._v("l``a")]),e._v("r"),a("code",[e._v("i``z``a``t``i``o``n`` ``l``o``s``s``e``s``.``")]),e._v("T"),a("code",[e._v("h``e``s``e`` ``l``o``s``s``e``s`` ``a")]),e._v("r"),a("code",[e._v("e``")]),e._v("u"),a("code",[e._v("s")]),e._v("u"),a("code",[e._v("a``l``l")]),e._v("y"),a("code",[e._v("``e")]),e._v("xpr"),a("code",[e._v("e``s``s``e``d`` ``a``s`` ``a`` ``b``a``t``c``h`` ``a")]),e._v("v"),a("code",[e._v("e")]),e._v("r"),a("code",[e._v("a``g``e``,`` ``s``o``")]),e._v("f"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``b``e``s``t``")]),e._v("r"),a("code",[e._v("e``s")]),e._v("u"),a("code",[e._v("l``t``s``,`` ``i``n`` ``e``a``c``h`` ``h``e``a``d``,``")]),e._v("u"),a("code",[e._v("s``e")]),e._v("r"),a("code",[e._v("s`` ``n``e``e``d`` ``t``o``")]),e._v("u"),a("code",[e._v("s``e`` ``t``h``e`` ``d``e")]),e._v("f"),a("code",[e._v("a")]),e._v("u"),a("code",[e._v("l``t`` ``l``o``s``s``_")]),e._v("r"),a("code",[e._v("e``d")]),e._v("u"),a("code",[e._v("c``t``i``o``n")]),e._v("=SUM"),a("code",[e._v("_")]),e._v("OVER"),a("code",[e._v("_")]),e._v("BATCH"),a("code",[e._v("_")]),e._v("SIZE"),a("code",[e._v("``t``o`` ``a")]),e._v("v"),a("code",[e._v("o``i``d`` ``s``c``a``l``i``n``g`` ``e")]),e._v("rr"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("s``.``")]),e._v("C"),a("code",[e._v("o``m")]),e._v("p"),a("code",[e._v("a")]),e._v("r"),a("code",[e._v("e``d`` ``t``o`` ``t``h``e``")]),e._v("r"),a("code",[e._v("e``g")]),e._v("u"),a("code",[e._v("l``a")]),e._v("r"),a("code",[e._v("i``z``a``t``i``o``n`` ``l``o``s``s``e``s``")]),e._v("f"),a("code",[e._v("o")]),e._v("r"),a("code",[e._v("``e``a``c``h`` ``h``e``a``d``,`` ``t``h``i``s`` ``l``o``s``s`` ``i``s`` ``t``o``")]),e._v("r"),a("code",[e._v("e``g")]),e._v("u"),a("code",[e._v("l``a")]),e._v("r"),a("code",[e._v("i``z``e`` ``t``h``e`` ``m``e")]),e._v("r"),a("code",[e._v("g``e``d`` ``l``o``s``s`` ``o")]),e._v("f"),a("code",[e._v("``a``l``l`` ``h``e``a``d``s`` ``i``n`` ``m")]),e._v("u"),a("code",[e._v("l``t``i`` ``h``e``a``d``,`` ``a``n``d``")]),e._v("w"),a("code",[e._v("i``l``l`` ``b``e`` ``a``d``d``e``d`` ``t``o`` ``t``h``e`` ``o")]),e._v("v"),a("code",[e._v("e")]),e._v("r"),a("code",[e._v("a``l``l`` ``t")]),e._v("r"),a("code",[e._v("a``i``n``i``n``g`` ``l``o``s``s`` ``o")]),e._v("f"),a("code",[e._v("``m")]),e._v("u"),a("code",[e._v("l``t``i`` ``h``e``a``d``.")])])]),e._v(" "),a("h4",{attrs:{id:"returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),a("p",[e._v("A model_fn.EstimatorSpec instance.")]),e._v(" "),a("h4",{attrs:{id:"raises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ValueError")]),e._v(": If both "),a("code",[e._v("train_op_fn")]),e._v(" and "),a("code",[e._v("optimizer")]),e._v(" are "),a("code",[e._v("None")]),e._v(" in TRAIN "),a("code",[e._v("mode")]),e._v(", or if both are set. If "),a("code",[e._v("mode")]),e._v(" is not in Estimator's "),a("code",[e._v("ModeKeys")]),e._v(".")])]),e._v(" "),a("h3",{attrs:{id:"loss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loss","aria-hidden":"true"}},[e._v("#")]),e._v(" loss")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" loss(\n    labels,\n    logits,\n    features=None,\n    mode=None,\n    regularization_losses=None\n)\n")])])]),a("p",[e._v("Returns regularized training loss. See base_head.Head for details.")]),e._v(" "),a("h3",{attrs:{id:"metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#metrics","aria-hidden":"true"}},[e._v("#")]),e._v(" metrics")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" metrics(regularization_losses=None)\n")])])]),a("p",[e._v("Creates metrics. See base_head.Head for details.")]),e._v(" "),a("h3",{attrs:{id:"predictions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#predictions","aria-hidden":"true"}},[e._v("#")]),e._v(" predictions")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" predictions(\n    logits,\n    keys=None\n)\n")])])]),a("p",[e._v("Create predictions. See base_head.Head for details.")]),e._v(" "),a("h3",{attrs:{id:"update-metrics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-metrics","aria-hidden":"true"}},[e._v("#")]),e._v(" update_metrics")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/head/multi_head.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" update_metrics(\n    eval_metrics,\n    features,\n    logits,\n    labels,\n    regularization_losses=None\n)\n")])])]),a("p",[e._v("Updates eval metrics. See base_head.Head for details.")])])}),[],!1,null,null,null);t.default=o.exports}}]);