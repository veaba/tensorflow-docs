(window.webpackJsonp=window.webpackJsonp||[]).push([[2460],{2648:function(e,t,a){"use strict";a.r(t);var r=a(0),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"class-pythonstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-pythonstate","aria-hidden":"true"}},[e._v("#")]),e._v(" Class PythonState")]),e._v(" "),a("p",[e._v("A mixin for putting Python state in an object-based checkpoint.")]),e._v(" "),a("h3",{attrs:{id:"aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),a("ul",[a("li",[e._v("Class "),a("code",[e._v("tf.compat.v1.train.experimental.PythonState")])]),e._v(" "),a("li",[e._v("Class "),a("code",[e._v("tf.compat.v2.train.experimental.PythonState")]),e._v(" "),a("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/train/Checkpoint",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.train.Checkpoint"),a("OutboundLink")],1),e._v("This is an abstract class which allows extensions to TensorFlow's object-based checkpointing (see ). For example a wrapper for NumPy arrays:")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" import io\nimport numpy\n\nclass NumpyWrapper(tf.train.experimental.PythonState):\n\n  def __init__(self, array):\n    self.array = array\n\n  def serialize(self):\n    string_file = io.BytesIO()\n    try:\n      numpy.save(string_file, self.array, allow_pickle=False)\n      serialized = string_file.getvalue()\n    finally:\n      string_file.close()\n    return serialized\n\n  def deserialize(self, string_value):\n    string_file = io.BytesIO(string_value)\n    try:\n      self.array = numpy.load(string_file, allow_pickle=False)\n    finally:\n      string_file.close()\n")])])]),a("p",[e._v("Instances of NumpyWrapper are checkpointable objects, and will be saved and restored from checkpoints along with TensorFlow state like variables.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" root = tf.train.Checkpoint(numpy=NumpyWrapper(numpy.array([1.])))\nsave_path = root.save(prefix)\nroot.numpy.array *= 2.\nassert [2.] == root.numpy.array\nroot.restore(save_path)\nassert [1.] == root.numpy.array\n")])])]),a("h2",{attrs:{id:"methods"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),a("h3",{attrs:{id:"deserialize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserialize","aria-hidden":"true"}},[e._v("#")]),e._v(" deserialize")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/tracking/python_state.py#L81-L83",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" deserialize(string_value)\n")])])]),a("p",[e._v("Callback to deserialize the object.")]),e._v(" "),a("h3",{attrs:{id:"serialize"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serialize","aria-hidden":"true"}},[e._v("#")]),e._v(" serialize")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/tracking/python_state.py#L77-L79",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" serialize()\n")])])]),a("p",[e._v("Callback to serialize the object. Returns a string.")])])}),[],!1,null,null,null);t.default=s.exports}}]);