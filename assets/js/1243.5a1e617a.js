(window.webpackJsonp=window.webpackJsonp||[]).push([[1243],{1431:function(e,t,o){"use strict";o.r(t);var a=o(0),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h2",{attrs:{id:"class-estimatorspec"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#class-estimatorspec","aria-hidden":"true"}},[e._v("#")]),e._v(" Class EstimatorSpec")]),e._v(" "),o("p",[e._v("Ops and objects returned from a model_fn and passed to an Estimator.")]),e._v(" "),o("h3",{attrs:{id:"aliases"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),o("ul",[o("li",[e._v("Class "),o("code",[e._v("tf.compat.v1.estimator.EstimatorSpec")])]),e._v(" "),o("li",[e._v("Class "),o("code",[e._v("tf.compat.v2.estimator.EstimatorSpec")])])]),e._v(" "),o("h3",{attrs:{id:"used-in-the-guide"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#used-in-the-guide","aria-hidden":"true"}},[e._v("#")]),e._v(" Used in the guide:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("M")]),e._v("i"),o("code",[e._v("g")]),e._v("r"),o("code",[e._v("a")]),e._v("t"),o("code",[e._v("e")]),e._v(" "),o("code",[e._v("y")]),e._v("o"),o("code",[e._v("u")]),e._v("r"),o("code"),e._v("T"),o("code",[e._v("e")]),e._v("n"),o("code",[e._v("s")]),e._v("o"),o("code",[e._v("r")]),e._v("F"),o("code",[e._v("l")]),e._v("o"),o("code",[e._v("w")]),e._v(" "),o("code",[e._v("1")]),e._v(" "),o("code",[e._v("c")]),e._v("o"),o("code",[e._v("d")]),e._v("e"),o("code"),e._v("t"),o("code",[e._v("o")]),e._v(" "),o("code",[e._v("T")]),e._v("e"),o("code",[e._v("n")]),e._v("s"),o("code",[e._v("o")]),e._v("r"),o("code",[e._v("F")]),e._v("l"),o("code",[e._v("o")]),e._v("w"),o("code"),e._v("2``")]),e._v(" "),o("li",[o("code",[e._v("T")]),e._v("r"),o("code",[e._v("a")]),e._v("i"),o("code",[e._v("n")]),e._v("i"),o("code",[e._v("n")]),e._v("g"),o("code"),e._v("c"),o("code",[e._v("h")]),e._v("e"),o("code",[e._v("c")]),e._v("k"),o("code",[e._v("p")]),e._v("o"),o("code",[e._v("i")]),e._v("n"),o("code",[e._v("t")]),e._v("s``")])]),e._v(" "),o("h3",{attrs:{id:"used-in-the-tutorials"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#used-in-the-tutorials","aria-hidden":"true"}},[e._v("#")]),e._v(" Used in the tutorials:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("M")]),e._v("u"),o("code",[e._v("l")]),e._v("t"),o("code",[e._v("i")]),e._v("-"),o("code",[e._v("w")]),e._v("o"),o("code",[e._v("r")]),e._v("k"),o("code",[e._v("e")]),e._v("r"),o("code"),e._v("t"),o("code",[e._v("r")]),e._v("a"),o("code",[e._v("i")]),e._v("n"),o("code",[e._v("i")]),e._v("n"),o("code",[e._v("g")]),e._v(" "),o("code",[e._v("w")]),e._v("i"),o("code",[e._v("t")]),e._v("h"),o("code"),e._v("E"),o("code",[e._v("s")]),e._v("t"),o("code",[e._v("i")]),e._v("m"),o("code",[e._v("a")]),e._v("t"),o("code",[e._v("o")]),e._v("r``")])]),e._v(" "),o("p",[e._v("EstimatorSpec fully defines the model to be run by an Estimator.")]),e._v(" "),o("h2",{attrs:{id:"new"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#new","aria-hidden":"true"}},[e._v("#")]),e._v(" "),o("strong",[e._v("new")])]),e._v(" "),o("p",[o("a",{attrs:{href:"https://github.com/tensorflow/estimator/tree/master/tensorflow_estimator/python/estimator/model_fn.py",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),o("OutboundLink")],1)]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v(" @staticmethod\n__new__(\n    cls,\n    mode,\n    predictions=None,\n    loss=None,\n    train_op=None,\n    eval_metric_ops=None,\n    export_outputs=None,\n    training_chief_hooks=None,\n    training_hooks=None,\n    scaffold=None,\n    evaluation_hooks=None,\n    prediction_hooks=None\n)\n")])])]),o("p",[e._v("Creates a validated EstimatorSpec instance.")]),e._v(" "),o("p",[e._v("Depending on the value of mode, different arguments are required. Namely")]),e._v(" "),o("ul",[o("li",[e._v("For "),o("code",[e._v("mode == ModeKeys.TRAIN")]),e._v(": required fields are "),o("code",[e._v("loss")]),e._v(" and "),o("code",[e._v("train_op")]),e._v(".")]),e._v(" "),o("li",[e._v("For "),o("code",[e._v("mode == ModeKeys.EVAL")]),e._v(": required field is "),o("code",[e._v("loss")]),e._v(".")]),e._v(" "),o("li",[e._v("For "),o("code",[e._v("mode == ModeKeys.PREDICT")]),e._v(": required fields are "),o("code",[e._v("predictions")]),e._v(".")])]),e._v(" "),o("p",[e._v("model_fn can populate all arguments independent of mode. In this case, some arguments will be ignored by an Estimator. E.g. train_op will be ignored in eval and infer modes. Example:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v(" def my_model_fn(features, labels, mode):\n  predictions = ...\n  loss = ...\n  train_op = ...\n  return tf.estimator.EstimatorSpec(\n      mode=mode,\n      predictions=predictions,\n      loss=loss,\n      train_op=train_op)\n")])])]),o("p",[e._v("Alternatively, model_fn can just populate the arguments appropriate to the given mode. Example:")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v(" def my_model_fn(features, labels, mode):\n  if (mode == tf.estimator.ModeKeys.TRAIN or\n      mode == tf.estimator.ModeKeys.EVAL):\n    loss = ...\n  else:\n    loss = None\n  if mode == tf.estimator.ModeKeys.TRAIN:\n    train_op = ...\n  else:\n    train_op = None\n  if mode == tf.estimator.ModeKeys.PREDICT:\n    predictions = ...\n  else:\n    predictions = None\n\n  return tf.estimator.EstimatorSpec(\n      mode=mode,\n      predictions=predictions,\n      loss=loss,\n      train_op=train_op)\n")])])]),o("h4",{attrs:{id:"args"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("mode")]),e._v(": A "),o("code",[e._v("ModeKeys")]),e._v(". Specifies if this is training, evaluation or prediction.")]),e._v(" "),o("li",[o("code",[e._v("predictions")]),e._v(": Predictions "),o("code",[e._v("Tensor")]),e._v(" or dict of "),o("code",[e._v("Tensor")]),e._v(".")]),e._v(" "),o("li",[o("code",[e._v("loss")]),e._v(": Training "),o("code",[e._v("loss")]),e._v(" "),o("code",[e._v("Tensor")]),e._v(". Must be either scalar, or with shape ["),o("code",[e._v("1")]),e._v("].")]),e._v(" "),o("li",[o("code",[e._v("train_op")]),e._v(": Op for the training step.")]),e._v(" "),o("li",[o("code",[e._v("eval_metric_ops")]),e._v(": Dict of metric results keyed by name. The values of the dict can be one of the following: ("),o("code",[e._v("1")]),e._v(") instance of "),o("code",[e._v("Metric")]),e._v(" class. (2) Results of calling a metric function, namely a ("),o("code",[e._v("metric_tensor, update_op")]),e._v(") tuple. "),o("code",[e._v("metric_tensor")]),e._v(" should be evaluated without any impact on state (typically is a pure computation results based on variables.). For example, it should not trigger the "),o("code",[e._v("update_op")]),e._v(" or requires any input fetching.")]),e._v(" "),o("li",[o("code",[e._v("export_outputs")]),e._v(": Describes the output signatures to be exported to "),o("code",[e._v("SavedModel")]),e._v(" and used during serving. A dict "),o("code",[e._v("{name: output}")]),e._v(" where:\nname: An arbitrary name for this output.\noutput: an "),o("code",[e._v("ExportOutput")]),e._v(" object such as "),o("code",[e._v("ClassificationOutput")]),e._v(", "),o("code",[e._v("RegressionOutput")]),e._v(", or "),o("code",[e._v("PredictOutput")]),e._v(". Single-headed "),o("code",[e._v("mode")]),e._v("ls only need to specify one entry in this dictionary. Multi-headed "),o("code",[e._v("mode")]),e._v("ls should specify one entry for each head, one of which must be named using "),o("code",[e._v("tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY")]),e._v(". If no entry is provided, a default "),o("code",[e._v("PredictOutput")]),e._v(" mapping to "),o("code",[e._v("predictions")]),e._v(" will be created.")]),e._v(" "),o("li",[e._v("name: An arbitrary name for this output.")]),e._v(" "),o("li",[e._v("output: an "),o("code",[e._v("ExportOutput")]),e._v(" object such as "),o("code",[e._v("ClassificationOutput")]),e._v(", "),o("code",[e._v("RegressionOutput")]),e._v(", or "),o("code",[e._v("PredictOutput")]),e._v(". Single-headed "),o("code",[e._v("mode")]),e._v("ls only need to specify one entry in this dictionary. Multi-headed "),o("code",[e._v("mode")]),e._v("ls should specify one entry for each head, one of which must be named using "),o("code",[e._v("tf.saved_model.signature_constants.DEFAULT_SERVING_SIGNATURE_DEF_KEY")]),e._v(". If no entry is provided, a default "),o("code",[e._v("PredictOutput")]),e._v(" mapping to "),o("code",[e._v("predictions")]),e._v(" will be created.")]),e._v(" "),o("li",[o("code",[e._v("training_chief_hooks")]),e._v(": Iterable of "),o("code",[e._v("tf.train.SessionRunHook")]),e._v(" objects to run on the chief worker during training.")]),e._v(" "),o("li",[o("code",[e._v("training_hooks")]),e._v(": Iterable of "),o("code",[e._v("tf.train.SessionRunHook")]),e._v(" objects to run on all workers during training.")]),e._v(" "),o("li",[o("code",[e._v("scaffold")]),e._v(": A "),o("code",[e._v("tf.train.Scaffold")]),e._v(" object that can be used to set initialization, saver, and more to be used in training.")]),e._v(" "),o("li",[o("code",[e._v("evaluation_hooks")]),e._v(": Iterable of "),o("code",[e._v("tf.train.SessionRunHook")]),e._v(" objects to run during evaluation.")]),e._v(" "),o("li",[o("code",[e._v("prediction_hooks")]),e._v(": Iterable of "),o("code",[e._v("tf.train.SessionRunHook")]),e._v(" objects to run during "),o("code",[e._v("predictions")]),e._v(".")])]),e._v(" "),o("h4",{attrs:{id:"returns"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),o("p",[e._v("A validated EstimatorSpec object.")]),e._v(" "),o("h4",{attrs:{id:"raises"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("ValueError")]),e._v(": If validation fails.")]),e._v(" "),o("li",[o("code",[e._v("TypeError")]),e._v(": If any of the arguments is not the expected type.")])]),e._v(" "),o("h2",{attrs:{id:"properties"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),o("h3",{attrs:{id:"mode"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mode","aria-hidden":"true"}},[e._v("#")]),e._v(" mode")]),e._v(" "),o("h3",{attrs:{id:"predictions"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#predictions","aria-hidden":"true"}},[e._v("#")]),e._v(" predictions")]),e._v(" "),o("h3",{attrs:{id:"loss"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#loss","aria-hidden":"true"}},[e._v("#")]),e._v(" loss")]),e._v(" "),o("h3",{attrs:{id:"train-op"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#train-op","aria-hidden":"true"}},[e._v("#")]),e._v(" train_op")]),e._v(" "),o("h3",{attrs:{id:"eval-metric-ops"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#eval-metric-ops","aria-hidden":"true"}},[e._v("#")]),e._v(" eval_metric_ops")]),e._v(" "),o("h3",{attrs:{id:"export-outputs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#export-outputs","aria-hidden":"true"}},[e._v("#")]),e._v(" export_outputs")]),e._v(" "),o("h3",{attrs:{id:"training-chief-hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#training-chief-hooks","aria-hidden":"true"}},[e._v("#")]),e._v(" training_chief_hooks")]),e._v(" "),o("h3",{attrs:{id:"training-hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#training-hooks","aria-hidden":"true"}},[e._v("#")]),e._v(" training_hooks")]),e._v(" "),o("h3",{attrs:{id:"scaffold"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#scaffold","aria-hidden":"true"}},[e._v("#")]),e._v(" scaffold")]),e._v(" "),o("h3",{attrs:{id:"evaluation-hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#evaluation-hooks","aria-hidden":"true"}},[e._v("#")]),e._v(" evaluation_hooks")]),e._v(" "),o("h3",{attrs:{id:"prediction-hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#prediction-hooks","aria-hidden":"true"}},[e._v("#")]),e._v(" prediction_hooks")])])}),[],!1,null,null,null);t.default=r.exports}}]);