(window.webpackJsonp=window.webpackJsonp||[]).push([[2537],{2728:function(e,t,a){"use strict";a.r(t);var o=a(0),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Constructs symbolic derivatives of sum of "),a("code",[e._v("ys")]),e._v(" w.r.t. x in "),a("code",[e._v("xs")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"aliases"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("tf.compat.v2.gradients")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" tf.gradients(\n    ys,\n    xs,\n    grad_ys=None,\n    name='gradients',\n    gate_gradients=False,\n    aggregation_method=None,\n    stop_gradients=None,\n    unconnected_gradients=tf.UnconnectedGradients.NONE\n)\n")])])]),a("p",[a("code",[e._v("ys")]),e._v(" and "),a("code",[e._v("xs")]),e._v(" are each a "),a("code",[e._v("Tensor")]),e._v(" or a list of tensors. "),a("code",[e._v("grad_ys")]),e._v(" is a list of "),a("code",[e._v("Tensor")]),e._v(", holding the gradients received by the "),a("code",[e._v("ys")]),e._v(". The list must be the same length as "),a("code",[e._v("ys")]),e._v(".\n"),a("code",[e._v("gradients")]),e._v("() adds ops to the graph to output the derivatives of "),a("code",[e._v("ys")]),e._v(" with respect to "),a("code",[e._v("xs")]),e._v(". It returns a list of "),a("code",[e._v("Tensor")]),e._v(" of length len("),a("code",[e._v("xs")]),e._v(") where each tensor is the sum(dy/dx) for y in "),a("code",[e._v("ys")]),e._v(".\n"),a("code",[e._v("grad_ys")]),e._v(" is a list of tensors of the same length as "),a("code",[e._v("ys")]),e._v(" that holds the initial gradients for each y in "),a("code",[e._v("ys")]),e._v(". When "),a("code",[e._v("grad_ys")]),e._v(" is None, we fill in a tensor of '1's of the shape of y for each y in "),a("code",[e._v("ys")]),e._v(". A user can provide their own initial "),a("code",[e._v("grad_ys")]),e._v(" to compute the derivatives using a different initial gradient for each y (e.g., if one wanted to weight the gradient differently for each value in each y).\n"),a("code",[e._v("stop_gradients")]),e._v(" is a "),a("code",[e._v("Tensor")]),e._v(" or a list of tensors to be considered constant with respect to all "),a("code",[e._v("xs")]),e._v(". These tensors will not be backpropagated through, as though they had been explicitly disconnected using "),a("code",[e._v("stop_gradient")]),e._v(". Among other things, this allows computation of partial derivatives as opposed to total derivatives. For example:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" a = tf.constant(0.)\nb = 2 * a\ng = tf.gradients(a + b, [a, b], stop_gradients=[a, b])\n")])])]),a("p",[e._v("Here the p"),a("code",[e._v("a")]),e._v("rti"),a("code",[e._v("a")]),e._v("l deriv"),a("code",[e._v("a")]),e._v("tives "),a("code",[e._v("g")]),e._v(" ev"),a("code",[e._v("a")]),e._v("lu"),a("code",[e._v("a")]),e._v("te to "),a("code",[e._v("[1.0, 1.0]")]),e._v(", comp"),a("code",[e._v("a")]),e._v("red to the tot"),a("code",[e._v("a")]),e._v("l deriv"),a("code",[e._v("a")]),e._v("tives tf."),a("code",[e._v("g")]),e._v("r"),a("code",[e._v("a")]),e._v("dients("),a("code",[e._v("a")]),e._v(" + "),a("code",[e._v("b")]),e._v(", ["),a("code",[e._v("a")]),e._v(", "),a("code",[e._v("b")]),e._v("]), which t"),a("code",[e._v("a")]),e._v("ke into "),a("code",[e._v("a")]),e._v("ccount the influence of "),a("code",[e._v("a")]),e._v(" on "),a("code",[e._v("b")]),e._v(" "),a("code",[e._v("a")]),e._v("nd ev"),a("code",[e._v("a")]),e._v("lu"),a("code",[e._v("a")]),e._v("te to "),a("code",[e._v(". Note th`a`t the `a")]),e._v("b"),a("code",[e._v("ove is equiv")]),e._v("a`lent to:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" a = tf.stop_gradient(tf.constant(0.))\nb = tf.stop_gradient(2 * a)\ng = tf.gradients(a + b, [a, b])\n")])])]),a("p",[a("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/stop_gradient",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.stop_gradient"),a("OutboundLink")],1),e._v("stop_gradients provides a way of stopping gradient after the graph has already been constructed, as compared to  which is used during graph construction. When the two approaches are combined, backpropagation stops at both  nodes and nodes in stop_gradients, whichever is encountered first.")]),e._v(" "),a("p",[e._v("All integer tensors are considered constant with respect to all "),a("code",[e._v("xs")]),e._v(", as if they were included in "),a("code",[e._v("stop_gradients")]),e._v(".\n"),a("code",[e._v("unconnected_gradients")]),e._v(" determines the value returned for each x in xs if it is unconnected in the graph to ys. By default this is None to safeguard against errors. Mathematically these gradients are zero which can be requested using the "),a("code",[e._v("'zero'")]),e._v(" option. "),a("code",[e._v("tf.UnconnectedGradients")]),e._v(" provides the following options and behaviors:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v(" a = tf.ones([1, 2])\nb = tf.ones([3, 1])\ng1 = tf.gradients([b], [a], unnconnected_gradients='none')\nsess.run(g1)  # [None]\n\ng2 = tf.gradients([b], [a], unconnected_gradients='zero')\nsess.run(g2)  # [array([[0., 0.]], dtype=float32)]\n")])])]),a("h4",{attrs:{id:"args"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ys")]),e._v(": A "),a("code",[e._v("Tensor")]),e._v(" or list of tensors to be differentiated.")]),e._v(" "),a("li",[a("code",[e._v("xs")]),e._v(": A "),a("code",[e._v("Tensor")]),e._v(" or list of tensors to be used for differentiation.")]),e._v(" "),a("li",[a("code",[e._v("grad_ys")]),e._v(": Optional. A "),a("code",[e._v("Tensor")]),e._v(" or list of tensors the same size as "),a("code",[e._v("ys")]),e._v(" and holding the gradients computed for each y in "),a("code",[e._v("ys")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("name")]),e._v(": Optional "),a("code",[e._v("name")]),e._v(" to use for grouping all the gradient ops together. defaults to 'gradients'.")]),e._v(" "),a("li",[a("code",[e._v("gate_gradients")]),e._v(": If True, add a tuple around the gradients returned for an operations. This avoids some race conditions.")]),e._v(" "),a("li",[a("code",[e._v("aggregation_method")]),e._v(": Specifies the method used to combine gradient terms. Accepted values are constants defined in the class "),a("code",[e._v("AggregationMethod")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("stop_gradients")]),e._v(": Optional. A "),a("code",[e._v("Tensor")]),e._v(" or list of tensors not to differentiate through.")]),e._v(" "),a("li",[a("code",[e._v("unconnected_gradients")]),e._v(": Optional. Specifies the gradient value returned when the given input tensors are unconnected. Accepted values are constants defined in the class "),a("code",[e._v("tf.UnconnectedGradients")]),e._v(" and the default value is "),a("code",[e._v("none")]),e._v(".")])]),e._v(" "),a("h4",{attrs:{id:"returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),a("p",[e._v("A list of sum(dy/dx) for each x in ``.")]),e._v(" "),a("h4",{attrs:{id:"raises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("LookupError")]),e._v(": if one of the operations between "),a("code",[e._v("x")]),e._v(" and "),a("code",[e._v("y")]),e._v(" does not have a registered gradient function.")]),e._v(" "),a("li",[a("code",[e._v("ValueError")]),e._v(": if the arguments are invalid.")]),e._v(" "),a("li",[a("code",[e._v("RuntimeError")]),e._v(": if called in Eager mode.")])])])}),[],!1,null,null,null);t.default=s.exports}}]);