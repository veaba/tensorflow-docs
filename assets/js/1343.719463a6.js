(window.webpackJsonp=window.webpackJsonp||[]).push([[1343],{1534:function(e,t,_){"use strict";_.r(t);var v=_(0),a=Object(v.a)({},(function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("Extract patches from images.")]),e._v(" "),_("h3",{attrs:{id:"aliases"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("tf.compat.v1.image.extract_patches")])]),e._v(" "),_("li",[_("code",[e._v("tf.compat.v2.image.extract_patches")])])]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v(" tf.image.extract_patches(\n    images,\n    sizes,\n    strides,\n    rates,\n    padding,\n    name=None\n)\n")])])]),_("p",[e._v("This op collects patches from the input image, as if applying a convolution. All extracted patches are stacked in the depth (last) dimension of the output.")]),e._v(" "),_("p",[e._v('Specifically, the op extracts patches of shape sizes which are strides apart in the input image. The output is subsampled using the rates argument, in the same manner as "atrous" or "dilated" convolutions.')]),e._v(" "),_("p",[e._v("The result is a 4D tensor which is indexed by batch, row, and column. output[i, x, y] contains a flattened patch of size sizes[1], sizes[2] which is taken from the input starting at images[i, x"),_("em",[e._v("strides[1], y")]),e._v("strides[2]].")]),e._v(" "),_("p",[e._v("Each output patch can be reshaped to sizes[1], sizes[2], depth, where depth is images.shape[3].")]),e._v(" "),_("p",[e._v("The output elements are taken from the input at intervals given by the rate argument, as in dilated convolutions.")]),e._v(" "),_("p",[e._v("The padding argument has no effect on the size of each patch, it determines how many patches are extracted. If VALID, only patches which are fully contained in the input image are included. If SAME, all patches whose starting point is inside the input are included, and areas outside the input default to zero.")]),e._v(" "),_("h4",{attrs:{id:"example"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[e._v("#")]),e._v(" Example:")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("   n = 10\n  # images is a 1 x 10 x 10 x 1 array that contains the numbers 1 through 100\n  images = [[[[x * n + y + 1] for y in range(n)] for x in range(n)]]\n\n  # We generate two outputs as follows:\n  # 1. 3x3 patches with stride length 5\n  # 2. Same as above, but the rate is increased to 2\n  tf.extract_image_patches(images=images,\n                           ksizes=[1, 3, 3, 1],\n                           strides=[1, 5, 5, 1],\n                           rates=[1, 1, 1, 1],\n                           padding='VALID')\n\n  # Yields:\n  [[[[ 1  2  3 11 12 13 21 22 23]\n     [ 6  7  8 16 17 18 26 27 28]]\n    [[51 52 53 61 62 63 71 72 73]\n     [56 57 58 66 67 68 76 77 78]]]]\n")])])]),_("p",[e._v("If we mark the pixels in the input image which are taken for the output with *, we see the pattern:")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("    *  *  *  4  5  *  *  *  9 10\n   *  *  * 14 15  *  *  * 19 20\n   *  *  * 24 25  *  *  * 29 30\n  31 32 33 34 35 36 37 38 39 40\n  41 42 43 44 45 46 47 48 49 50\n   *  *  * 54 55  *  *  * 59 60\n   *  *  * 64 65  *  *  * 69 70\n   *  *  * 74 75  *  *  * 79 80\n  81 82 83 84 85 86 87 88 89 90\n  91 92 93 94 95 96 97 98 99 100\n")])])]),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("   tf.extract_image_patches(images=images,\n                           sizes=[1, 3, 3, 1],\n                           strides=[1, 5, 5, 1],\n                           rates=[1, 2, 2, 1],\n                           padding='VALID')\n\n  # Yields:\n  [[[[  1   3   5  21  23  25  41  43  45]\n     [  6   8  10  26  28  30  46  48  50]]\n\n    [[ 51  53  55  71  73  75  91  93  95]\n     [ 56  58  60  76  78  80  96  98 100]]]]\n")])])]),_("p",[e._v("We can again draw the effect, this time using the symbols *, x, + and o to distinguish the patches:")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v("    *  2  *  4  *  x  7  x  9  x\n  11 12 13 14 15 16 17 18 19 20\n   * 22  * 24  *  x 27  x 29  x\n  31 32 33 34 35 36 37 38 39 40\n   * 42  * 44  *  x 47  x 49  x\n   + 52  + 54  +  o 57  o 59  o\n  61 62 63 64 65 66 67 68 69 70\n   + 72  + 74  +  o 77  o 79  o\n  81 82 83 84 85 86 87 88 89 90\n   + 92  + 94  +  o 97  o 99  o\n")])])]),_("h4",{attrs:{id:"args"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("images")]),e._v(": A 4-D Tensor with shape `[batch, in_rows, in_cols, depth]")]),e._v(" "),_("li",[_("code",[e._v("sizes")]),e._v(": The size of the extracted patches. Must be [1, size_rows, size_cols, 1].")]),e._v(" "),_("li",[_("code",[e._v("strides")]),e._v(":"),_("code"),e._v("A"),_("code",[e._v("``1")]),e._v("-D"),_("code"),e._v("T"),_("code",[e._v("e")]),e._v("n"),_("code",[e._v("s``o``r`` ``o")]),e._v("f"),_("code",[e._v("``l``e")]),e._v("ng"),_("code",[e._v("t")]),e._v("h"),_("code"),e._v("4."),_("code"),e._v("H"),_("code",[e._v("o``w``")]),e._v("fa"),_("code",[e._v("r`` ``t")]),e._v("h"),_("code",[e._v("e`` ``c``e")]),e._v("n"),_("code",[e._v("t``e``r``s`` ``o")]),e._v("f"),_("code",[e._v("``t``w``o`` ``c``o")]),e._v("n"),_("code",[e._v("s``e``c")]),e._v("u"),_("code",[e._v("t``i")]),e._v("v"),_("code",[e._v("e``")]),e._v("pa"),_("code",[e._v("t``c")]),e._v("h"),_("code",[e._v("e``s``")]),e._v("a"),_("code",[e._v("r``e`` ``i")]),e._v("n"),_("code",[e._v("``t")]),e._v("h"),_("code",[e._v("e`` ``images")]),e._v("."),_("code"),e._v("Mu"),_("code",[e._v("s``t``")]),e._v("b"),_("code",[e._v("e")]),e._v(":"),_("code"),e._v("["),_("code",[e._v("1``,`` ``s``t``r``i``d``e``_``r``o``w``s``,`` ``s``t``r``i``d``e``_``c``o``l``s``,`` ``1")]),e._v("].")]),e._v(" "),_("li",[_("code",[e._v("r``a``t``e``s")]),e._v(":"),_("code"),e._v("A"),_("code",[e._v("``1")]),e._v("-D"),_("code"),e._v("T"),_("code",[e._v("e")]),e._v("n"),_("code",[e._v("s``o``r`` ``o")]),e._v("f"),_("code",[e._v("``l``e")]),e._v("ng"),_("code",[e._v("t")]),e._v("h"),_("code"),e._v("4."),_("code"),e._v("Mu"),_("code",[e._v("s``t``")]),e._v("b"),_("code",[e._v("e")]),e._v(":"),_("code"),e._v("["),_("code",[e._v("1``,`` ``r``a``t``e``_``r``o``w``s``,`` ``r``a``t``e``_``c``o``l``s``,`` ``1")]),e._v("]."),_("code"),e._v("Th"),_("code",[e._v("i``s`` ``i``s`` ``t")]),e._v("h"),_("code",[e._v("e`` ``i")]),e._v("npu"),_("code",[e._v("t`` ``s``t``r``i``d``e``,`` ``s")]),e._v("p"),_("code",[e._v("e``c``i")]),e._v("fy"),_("code",[e._v("i")]),e._v("ng"),_("code"),e._v("h"),_("code",[e._v("o``w``")]),e._v("f"),_("code",[e._v("a``r`` ``t``w``o`` ``c``o")]),e._v("n"),_("code",[e._v("s``e``c")]),e._v("u"),_("code",[e._v("t``i")]),e._v("v"),_("code",[e._v("e``")]),e._v("p"),_("code",[e._v("a``t``c")]),e._v("h"),_("code",[e._v("``s``a")]),e._v("mp"),_("code",[e._v("l``e``s`` ``a``r``e`` ``i")]),e._v("n"),_("code",[e._v("``t")]),e._v("h"),_("code",[e._v("e`` ``i")]),e._v("npu"),_("code",[e._v("t")]),e._v("."),_("code"),e._v("Equ"),_("code",[e._v("i")]),e._v("v"),_("code",[e._v("a``l``e")]),e._v("n"),_("code",[e._v("t`` ``t``o`` ``e")]),e._v("x"),_("code",[e._v("t``r``a``c``t``i")]),e._v("ng"),_("code"),e._v("p"),_("code",[e._v("a``t``c")]),e._v("h"),_("code",[e._v("e``s`` ``w``i``t")]),e._v("h"),_("code"),e._v("p"),_("code",[e._v("a``t``c")]),e._v("h"),_("code",[e._v("_``sizes``_``e")]),e._v("ff"),_("code"),e._v("="),_("code"),e._v("p"),_("code",[e._v("a``t``c")]),e._v("h"),_("code",[e._v("_``sizes``")]),e._v("+"),_("code"),e._v("(p"),_("code",[e._v("a``t``c")]),e._v("h"),_("code",[e._v("_``sizes``")]),e._v("-"),_("code",[e._v("``1")]),e._v(")"),_("code"),e._v("*"),_("code"),e._v("("),_("code",[e._v("r``a``t``e``s``")]),e._v("-"),_("code",[e._v("``1")]),e._v(")"),_("code",[e._v(",``")]),e._v("f"),_("code",[e._v("o``l``l``o``w``e``d``")]),e._v("by"),_("code",[e._v("``s")]),e._v("ub"),_("code",[e._v("s``a")]),e._v("mp"),_("code",[e._v("l``i")]),e._v("ng"),_("code",[e._v("``t")]),e._v("h"),_("code",[e._v("e")]),e._v("m"),_("code",[e._v("``s")]),e._v("p"),_("code",[e._v("a``t``i``a``l``l")]),e._v("y"),_("code"),e._v("by"),_("code",[e._v("``a``")]),e._v("f"),_("code",[e._v("a``c``t``o``r`` ``o")]),e._v("f"),_("code",[e._v("``r``a``t``e``s")]),e._v("."),_("code"),e._v("Th"),_("code",[e._v("i``s`` ``i``s`` ``e")]),e._v("qu"),_("code",[e._v("i")]),e._v("v"),_("code",[e._v("a``l``e")]),e._v("n"),_("code",[e._v("t`` ``t``o`` ``r``a``t``e`` ``i")]),e._v("n"),_("code",[e._v("``d``i``l``a``t``e``d``")]),e._v("("),_("code",[e._v("a")]),e._v(".k."),_("code",[e._v("a")]),e._v("."),_("code"),e._v("A"),_("code",[e._v("t``r``o")]),e._v("u"),_("code",[e._v("s")]),e._v(")"),_("code",[e._v("``c``o")]),e._v("nv"),_("code",[e._v("o``l")]),e._v("u"),_("code",[e._v("t``i``o")]),e._v("n"),_("code",[e._v("s")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("padding")]),e._v(":"),_("code"),e._v("Th"),_("code",[e._v("e`` ``t")]),e._v("yp"),_("code",[e._v("e`` ``o")]),e._v("f"),_("code",[e._v("``padding`` ``a``l")]),e._v("g"),_("code",[e._v("o``r``i``t")]),e._v("hm"),_("code",[e._v("``t``o``")]),e._v("u"),_("code",[e._v("s``e")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("name")]),e._v(":"),_("code"),e._v("A"),_("code",[e._v("``name``")]),e._v("f"),_("code",[e._v("o``r`` ``t")]),e._v("h"),_("code",[e._v("e`` ``o")]),e._v("p"),_("code",[e._v("e``r``a``t``i``o")]),e._v("n"),_("code"),e._v("("),_("code",[e._v("o")]),e._v("p"),_("code",[e._v("t``i``o")]),e._v("n"),_("code",[e._v("a``l")]),e._v(").")])]),e._v(" "),_("h4",{attrs:{id:"returns"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),_("p",[e._v("A 4-D Tensor of the same type as the input.")])])}),[],!1,null,null,null);t.default=a.exports}}]);