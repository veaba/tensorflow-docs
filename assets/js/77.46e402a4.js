(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{268:function(e,a,t){"use strict";t.r(a);var r=t(0),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"class-sparseconditionalaccumulator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-sparseconditionalaccumulator","aria-hidden":"true"}},[e._v("#")]),e._v(" Class SparseConditionalAccumulator")]),e._v(" "),t("p",[e._v("A conditional accumulator for aggregating sparse gradients.\n"),t("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/compat/v1/ConditionalAccumulatorBase",target:"_blank",rel:"noopener noreferrer"}},[e._v("ConditionalAccumulatorBase"),t("OutboundLink")],1),e._v("Inherits From:")]),e._v(" "),t("h3",{attrs:{id:"aliases"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),t("ul",[t("li",[e._v("Class "),t("code",[e._v("tf.compat.v1.sparse.SparseConditionalAccumulator")])])]),e._v(" "),t("p",[e._v("Sparse gradients are represented by IndexedSlices.")]),e._v(" "),t("p",[e._v("Up-to-date gradients (i.e., time step at which gradient was computed is equal to the accumulator's time step) are added to the accumulator.")]),e._v(" "),t("p",[e._v("Extraction of the average gradient is blocked until the required number of gradients has been accumulated.")]),e._v(" "),t("h4",{attrs:{id:"args"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("dtype")]),e._v(": Datatype of the accumulated gradients.")]),e._v(" "),t("li",[t("code",[e._v("shape")]),e._v(": Shape of the accumulated gradients.")]),e._v(" "),t("li",[t("code",[e._v("shared_name")]),e._v(": Optional. If non-empty, this accumulator will be shared under the given name across multiple sessions.")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the accumulator.")]),e._v(" "),t("li",[t("code",[e._v("reduction_type")]),e._v(": Reduction type to use when taking the gradient.")])]),e._v(" "),t("h2",{attrs:{id:"init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("init")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1382-L1395",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" __init__(\n    dtype,\n    shape=None,\n    shared_name=None,\n    name='sparse_conditional_accumulator',\n    reduction_type='MEAN'\n)\n")])])]),t("p",[e._v("Creates a new ConditionalAccumulator.")]),e._v(" "),t("h4",{attrs:{id:"args-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("dtype")]),e._v(": Datatype of the accumulated gradients.")]),e._v(" "),t("li",[t("code",[e._v("shape")]),e._v(": Shape of the accumulated gradients.")]),e._v(" "),t("li",[t("code",[e._v("accumulator_ref")]),e._v(": A handle to the conditional accumulator, created by sub- classes")])]),e._v(" "),t("h2",{attrs:{id:"properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),t("h3",{attrs:{id:"accumulator-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#accumulator-ref","aria-hidden":"true"}},[e._v("#")]),e._v(" accumulator_ref")]),e._v(" "),t("p",[e._v("The underlying accumulator reference.")]),e._v(" "),t("h3",{attrs:{id:"dtype"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dtype","aria-hidden":"true"}},[e._v("#")]),e._v(" dtype")]),e._v(" "),t("p",[e._v("The datatype of the gradients accumulated by this accumulator.")]),e._v(" "),t("h3",{attrs:{id:"name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name","aria-hidden":"true"}},[e._v("#")]),e._v(" name")]),e._v(" "),t("p",[e._v("The name of the underlying accumulator.")]),e._v(" "),t("h2",{attrs:{id:"methods"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),t("h3",{attrs:{id:"apply-grad"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apply-grad","aria-hidden":"true"}},[e._v("#")]),e._v(" apply_grad")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1421-L1467",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" apply_grad(\n    grad_indices,\n    grad_values,\n    grad_shape=None,\n    local_step=0,\n    name=None\n)\n")])])]),t("p",[e._v("Attempts to apply a sparse gradient to the accumulator.")]),e._v(" "),t("p",[e._v("The attempt is silently dropped if the gradient is stale, i.e., local_step is less than the accumulator's global time step.")]),e._v(" "),t("p",[e._v("A sparse gradient is represented by its indices, values and possibly empty or None shape. Indices must be a vector representing the locations of non-zero entries in the tensor. Values are the non-zero slices of the gradient, and must have the same first dimension as indices, i.e., the nnz represented by indices and values must be consistent. Shape, if not empty or None, must be consistent with the accumulator's shape (if also provided).")]),e._v(" "),t("h4",{attrs:{id:"example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[e._v("#")]),e._v(" Example:")]),e._v(" "),t("p",[e._v("A tensor [[0, 0], [0, 1], [2, 3]] can be represented indices: [1,2] values: [[0,1],[2,3]] shape: [3, 2]")]),e._v(" "),t("h4",{attrs:{id:"args-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("grad_indices")]),e._v(": Indices of the sparse gradient to be applied.")]),e._v(" "),t("li",[t("code",[e._v("grad_values")]),e._v(": Values of the sparse gradient to be applied.")]),e._v(" "),t("li",[t("code",[e._v("grad_shape")]),e._v(": Shape of the sparse gradient to be applied.")]),e._v(" "),t("li",[t("code",[e._v("local_step")]),e._v(": Time step at which the gradient was computed.")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation.")])]),e._v(" "),t("h4",{attrs:{id:"returns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("The operation that (conditionally) applies a gradient to the accumulator.")]),e._v(" "),t("h4",{attrs:{id:"raises"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("InvalidArgumentError")]),e._v(": If grad is of the wrong shape")])]),e._v(" "),t("h3",{attrs:{id:"apply-indexed-slices-grad"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apply-indexed-slices-grad","aria-hidden":"true"}},[e._v("#")]),e._v(" apply_indexed_slices_grad")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1397-L1419",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" apply_indexed_slices_grad(\n    grad,\n    local_step=0,\n    name=None\n)\n")])])]),t("p",[e._v("Attempts to apply a gradient to the accumulator.")]),e._v(" "),t("p",[e._v("The attempt is silently dropped if the gradient is stale, i.e., local_step is less than the accumulator's global time step.")]),e._v(" "),t("h4",{attrs:{id:"args-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-4","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("grad")]),e._v(": The "),t("code",[e._v("grad")]),e._v("ient "),t("code",[e._v("IndexedSlices")]),e._v(" to be applied.")]),e._v(" "),t("li",[t("code",[e._v("local_step")]),e._v(": Time step at which the "),t("code",[e._v("grad")]),e._v("ient was computed.")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation.")])]),e._v(" "),t("h4",{attrs:{id:"returns-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("The operation that (conditionally) applies a gradient to the accumulator.")]),e._v(" "),t("h4",{attrs:{id:"raises-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raises-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("InvalidArgumentError")]),e._v(": If grad is of the wrong shape")])]),e._v(" "),t("h3",{attrs:{id:"num-accumulated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#num-accumulated","aria-hidden":"true"}},[e._v("#")]),e._v(" num_accumulated")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1522-L1535",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" num_accumulated(name=None)\n")])])]),t("p",[e._v("Number of gradients that have currently been aggregated in accumulator.")]),e._v(" "),t("h4",{attrs:{id:"args-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-5","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation.")])]),e._v(" "),t("h4",{attrs:{id:"returns-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("Number of accumulated gradients currently in accumulator.")]),e._v(" "),t("h3",{attrs:{id:"set-global-step"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#set-global-step","aria-hidden":"true"}},[e._v("#")]),e._v(" set_global_step")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1537-L1553",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" set_global_step(\n    new_global_step,\n    name=None\n)\n")])])]),t("p",[e._v("Sets the global time step of the accumulator.")]),e._v(" "),t("p",[e._v("The operation logs a warning if we attempt to set to a time step that is lower than the accumulator's own time step.")]),e._v(" "),t("h4",{attrs:{id:"args-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-6","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("new_global_step")]),e._v(": Value of new time step. Can be a variable or a constant")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation.")])]),e._v(" "),t("h4",{attrs:{id:"returns-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-4","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("Operation that sets the accumulator's time step.")]),e._v(" "),t("h3",{attrs:{id:"take-grad"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#take-grad","aria-hidden":"true"}},[e._v("#")]),e._v(" take_grad")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1469-L1491",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" take_grad(\n    num_required,\n    name=None\n)\n")])])]),t("p",[e._v("Attempts to extract the average gradient from the accumulator.")]),e._v(" "),t("p",[e._v("The operation blocks until sufficient number of gradients have been successfully applied to the accumulator.")]),e._v(" "),t("p",[e._v("Once successful, the following actions are also triggered: - Counter of accumulated gradients is reset to 0. - Aggregated gradient is reset to 0 tensor. - Accumulator's internal time step is incremented by 1.")]),e._v(" "),t("h4",{attrs:{id:"args-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-7","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("num_required")]),e._v(": Number of gradients that needs to have been aggregated")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation")])]),e._v(" "),t("h4",{attrs:{id:"returns-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-5","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("A tuple of indices, values, and shape representing the average gradient.")]),e._v(" "),t("h4",{attrs:{id:"raises-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raises-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("InvalidArgumentError")]),e._v(": If "),t("code",[e._v("num_required")]),e._v(" < 1")])]),e._v(" "),t("h3",{attrs:{id:"take-indexed-slices-grad"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#take-indexed-slices-grad","aria-hidden":"true"}},[e._v("#")]),e._v(" take_indexed_slices_grad")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/ops/data_flow_ops.py#L1493-L1519",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" take_indexed_slices_grad(\n    num_required,\n    name=None\n)\n")])])]),t("p",[e._v("Attempts to extract the average gradient from the accumulator.")]),e._v(" "),t("p",[e._v("The operation blocks until sufficient number of gradients have been successfully applied to the accumulator.")]),e._v(" "),t("p",[e._v("Once successful, the following actions are also triggered: - Counter of accumulated gradients is reset to 0. - Aggregated gradient is reset to 0 tensor. - Accumulator's internal time step is incremented by 1.")]),e._v(" "),t("h4",{attrs:{id:"args-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args-8","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("num_required")]),e._v(": Number of gradients that needs to have been aggregated")]),e._v(" "),t("li",[t("code",[e._v("name")]),e._v(": Optional "),t("code",[e._v("name")]),e._v(" for the operation")])]),e._v(" "),t("h4",{attrs:{id:"returns-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-6","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("An IndexedSlices holding the value of the average gradient.")]),e._v(" "),t("h4",{attrs:{id:"raises-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#raises-4","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("InvalidArgumentError")]),e._v(": If "),t("code",[e._v("num_required")]),e._v(" < 1")])])])}),[],!1,null,null,null);a.default=s.exports}}]);