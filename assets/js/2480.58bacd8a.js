(window.webpackJsonp=window.webpackJsonp||[]).push([[2480],{2671:function(e,a,t){"use strict";t.r(a);var s=t(0),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"class-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class-module","aria-hidden":"true"}},[e._v("#")]),e._v(" Class Module")]),e._v(" "),t("p",[e._v("Base neural network module class.")]),e._v(" "),t("h3",{attrs:{id:"aliases"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aliases","aria-hidden":"true"}},[e._v("#")]),e._v(" Aliases:")]),e._v(" "),t("ul",[t("li",[e._v("Class "),t("code",[e._v("tf.compat.v1.Module")])]),e._v(" "),t("li",[e._v("Class "),t("code",[e._v("tf.compat.v2.Module")])])]),e._v(" "),t("h3",{attrs:{id:"used-in-the-guide"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#used-in-the-guide","aria-hidden":"true"}},[e._v("#")]),e._v(" Used in the guide:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("U")]),e._v("s"),t("code",[e._v("i")]),e._v("n"),t("code",[e._v("g")]),e._v(" "),t("code",[e._v("t")]),e._v("h"),t("code",[e._v("e")]),e._v(" "),t("code",[e._v("S")]),e._v("a"),t("code",[e._v("v")]),e._v("e"),t("code",[e._v("d")]),e._v("M"),t("code",[e._v("o")]),e._v("d"),t("code",[e._v("e")]),e._v("l"),t("code"),e._v("f"),t("code",[e._v("o")]),e._v("r"),t("code",[e._v("m")]),e._v("a"),t("code",[e._v("t")]),e._v(" "),t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/Variable",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.Variable"),t("OutboundLink")],1),e._v("A module is a named container for s, other tf.Modules and functions which apply to user input. For example a dense layer in a neural network might be implemented as a tf.Module:")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("  class Dense(tf.Module):\n   def __init__(self, in_features, output_features, name=None):\n     super(Dense, self).__init__(name=name)\n     self.w = tf.Variable(\n         tf.random.normal([input_features, output_features]), name='w')\n     self.b = tf.Variable(tf.zeros([output_features]), name='b')\n\n   def __call__(self, x):\n     y = tf.matmul(x, self.w) + self.b\n     return tf.nn.relu(y)\n")])])]),t("p",[e._v("You can use the Dense layer as you would expect:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" d = Dense(input_features=64, output_features=10)\nd(tf.ones([100, 64]))\n#==> <tf.Tensor: ...>\n")])])]),t("p",[t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/Module",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.Module"),t("OutboundLink")],1),e._v("By subclassing  instead of object any tf.Variable or  instances assigned to object properties can be collected using the variables, trainable_variables or submodules property:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" d.variables\n#==> (<tf.Variable 'b:0' ...>, <tf.Variable 'w:0' ...>)\n")])])]),t("p",[t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/Module",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.Module"),t("OutboundLink")],1),e._v("Subclasses of  can also take advantage of the _flatten method which can be used to implement tracking of any other types.")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/Module",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.Module"),t("OutboundLink")],1),e._v("All  classes have an associated tf.name_scope which can be used to group operations in TensorBoard and create hierarchies for variable names which can help with debugging. We suggest using the name scope when creating nested submodules/parameters or for forward methods whose graph you might want to inspect in TensorBoard. You can enter the name scope explicitly using with self.name_scope: or you can annotate methods (apart from "),t("strong",[e._v("init")]),e._v(") with @.with_name_scope.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" class MLP(tf.Module):\n  def __init__(self, input_size, sizes, name=None):\n    super(MLP, self).__init__(name=name)\n    self.layers = []\n    with self.name_scope:\n      for size in sizes:\n        self.layers.append(Dense(input_size=input_size, output_size=size))\n        input_size = size\n\n  @tf.Module.with_name_scope\n  def __call__(self, x):\n    for layer in self.layers:\n      x = layer(x)\n    return x\n")])])]),t("h2",{attrs:{id:"init"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),t("strong",[e._v("init")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/module/module.py#L107-L122",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" __init__(name=None)\n")])])]),t("p",[e._v("Initialize self. See help(type(self)) for accurate signature.")]),e._v(" "),t("h2",{attrs:{id:"properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),t("h3",{attrs:{id:"name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name","aria-hidden":"true"}},[e._v("#")]),e._v(" name")]),e._v(" "),t("p",[e._v("Returns the name of this module as passed or determined in the ctor.\nNOTE: This is not the same as the "),t("code",[e._v("self.name_scope.name")]),e._v(" which includes parent module names.")]),e._v(" "),t("h3",{attrs:{id:"name-scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#name-scope","aria-hidden":"true"}},[e._v("#")]),e._v(" name_scope")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/name_scope",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.name_scope"),t("OutboundLink")],1),e._v("Returns a  instance for this class.")]),e._v(" "),t("h3",{attrs:{id:"submodules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#submodules","aria-hidden":"true"}},[e._v("#")]),e._v(" submodules")]),e._v(" "),t("p",[e._v("Sequence of all sub-modules.\nSubmodules are modules which are properties of this module, or found as properties of modules which are properties of this module (and so on).")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" a = tf.Module()\nb = tf.Module()\nc = tf.Module()\na.b = b\nb.c = c\nassert list(a.submodules) == [b, c]\nassert list(b.submodules) == [c]\nassert list(c.submodules) == []\n")])])]),t("h4",{attrs:{id:"returns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("A sequence of all submodules.")]),e._v(" "),t("h3",{attrs:{id:"trainable-variables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#trainable-variables","aria-hidden":"true"}},[e._v("#")]),e._v(" trainable_variables")]),e._v(" "),t("p",[e._v("Sequence of variables owned by this module and it's submodules.")]),e._v(" "),t("h4",{attrs:{id:"returns-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("A sequence of variables for the current module (sorted by attribute name) followed by variables from all submodules recursively (breadth first).")]),e._v(" "),t("h3",{attrs:{id:"variables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#variables","aria-hidden":"true"}},[e._v("#")]),e._v(" variables")]),e._v(" "),t("p",[e._v("Sequence of variables owned by this module and it's submodules.")]),e._v(" "),t("h4",{attrs:{id:"returns-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("A sequence of variables for the current module (sorted by attribute name) followed by variables from all submodules recursively (breadth first).")]),e._v(" "),t("h2",{attrs:{id:"methods"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),t("h3",{attrs:{id:"with-name-scope"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#with-name-scope","aria-hidden":"true"}},[e._v("#")]),e._v(" with_name_scope")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/module/module.py#L260-L294",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" @classmethod\nwith_name_scope(\n    cls,\n    method\n)\n")])])]),t("p",[e._v("Decorator to automatically enter the module name scope.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" class MyModule(tf.Module):\n  @tf.Module.with_name_scope\n  def __call__(self, x):\n    if not hasattr(self, 'w'):\n      self.w = tf.Variable(tf.random.normal([x.shape[1], 64]))\n    return tf.matmul(x, self.w)\n")])])]),t("p",[t("a",{attrs:{href:"https://tensorflow.google.cn/api_docs/python/tf/Variable",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.Variable"),t("OutboundLink")],1),e._v("Using the above module would produce s and tf.Tensors whose names included the module name:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v(" mod = MyModule()\nmod(tf.ones([8, 32]))\n# ==> <tf.Tensor: ...>\nmod.w\n# ==> <tf.Variable ...'my_module/w:0'>\n")])])]),t("h4",{attrs:{id:"args"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("method")]),e._v(": The "),t("code",[e._v("method")]),e._v(" to wrap.")])]),e._v(" "),t("h4",{attrs:{id:"returns-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#returns-4","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),t("p",[e._v("The original method wrapped such that it enters the module's name scope.")])])}),[],!1,null,null,null);a.default=r.exports}}]);