(window.webpackJsonp=window.webpackJsonp||[]).push([[881],{1069:function(e,t,s){"use strict";s.r(t);var o=s(0),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"class-singularmonitoredsession"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#class-singularmonitoredsession","aria-hidden":"true"}},[e._v("#")]),e._v(" Class SingularMonitoredSession")]),e._v(" "),s("p",[e._v("Session-like object that handles initialization, restoring, and hooks.\n"),s("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/compat/v1/train/MonitoredSession",target:"_blank",rel:"noopener noreferrer"}},[e._v("tf.compat.v1.train.MonitoredSession"),s("OutboundLink")],1),e._v("Please note that this utility is not recommended for distributed settings. For distributed settings, please use . The differences between MonitoredSession and SingularMonitoredSession are:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("MonitoredSession")]),e._v(" handles "),s("code",[e._v("AbortedError")]),e._v(" and "),s("code",[e._v("UnavailableError")]),e._v(" for distributed settings, but "),s("code",[e._v("SingularMonitoredSession")]),e._v(" does not.")]),e._v(" "),s("li",[s("code",[e._v("MonitoredSession")]),e._v(" can be created in "),s("code",[e._v("chief")]),e._v(" or "),s("code",[e._v("worker")]),e._v(" modes. "),s("code",[e._v("SingularMonitoredSession")]),e._v(" is always created as "),s("code",[e._v("chief")]),e._v(".")]),e._v(" "),s("li",[e._v("You can access the raw "),s("code",[e._v("tf.compat.v1.Session")]),e._v(" object used by "),s("code",[e._v("SingularMonitoredSession")]),e._v(", whereas in "),s("code",[e._v("MonitoredSession")]),e._v(" the raw session is private. This can be used:\nTo "),s("code",[e._v("run")]),e._v(" without hooks.\nTo save and restore.")]),e._v(" "),s("li",[e._v("To "),s("code",[e._v("run")]),e._v(" without hooks.")]),e._v(" "),s("li",[e._v("To save and restore.")]),e._v(" "),s("li",[e._v("All other functionality is identical.")])]),e._v(" "),s("h4",{attrs:{id:"example-usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-usage","aria-hidden":"true"}},[e._v("#")]),e._v(" Example usage:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" saver_hook = CheckpointSaverHook(...)\nsummary_hook = SummarySaverHook(...)\nwith SingularMonitoredSession(hooks=[saver_hook, summary_hook]) as sess:\n  while not sess.should_stop():\n    sess.run(train_op)\n")])])]),s("p",[e._v("Initialization: At creation time the hooked session does following things in given order:")]),e._v(" "),s("ul",[s("li",[e._v("calls "),s("code",[e._v("hook.begin")]),e._v("() for each given hook")]),e._v(" "),s("li",[e._v("finalizes the graph via "),s("code",[e._v("scaffold.finalize")]),e._v("()")]),e._v(" "),s("li",[e._v("create session")]),e._v(" "),s("li",[e._v("initializes the model via initialization ops provided by "),s("code",[e._v("Scaffold")])]),e._v(" "),s("li",[e._v("restores variables if a checkpoint exists")]),e._v(" "),s("li",[e._v("launches queue runners")])]),e._v(" "),s("p",[e._v("Run: When run() is called, the hooked session does following things:")]),e._v(" "),s("ul",[s("li",[e._v("calls "),s("code",[e._v("hook.before_run")]),e._v("()")]),e._v(" "),s("li",[e._v("calls TensorFlow "),s("code",[e._v("session.run")]),e._v("() with merged fetches and feed_dict")]),e._v(" "),s("li",[e._v("calls "),s("code",[e._v("hook.after_run")]),e._v("()")]),e._v(" "),s("li",[e._v("returns result of "),s("code",[e._v("session.run")]),e._v("() asked by user")])]),e._v(" "),s("p",[e._v("Exit: At the close(), the hooked session does following things in order:")]),e._v(" "),s("ul",[s("li",[e._v("calls "),s("code",[e._v("hook.end")]),e._v("()")]),e._v(" "),s("li",[e._v("closes the queue runners and the session")]),e._v(" "),s("li",[e._v("suppresses "),s("code",[e._v("OutOfRange")]),e._v(" error which indicates that all inputs have been processed if the "),s("code",[e._v("SingularMonitoredSession")]),e._v(" is used as a context.")])]),e._v(" "),s("h2",{attrs:{id:"init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init","aria-hidden":"true"}},[e._v("#")]),e._v(" "),s("strong",[e._v("init")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L1071-L1104",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" __init__(\n    hooks=None,\n    scaffold=None,\n    master='',\n    config=None,\n    checkpoint_dir=None,\n    stop_grace_period_secs=120,\n    checkpoint_filename_with_path=None\n)\n")])])]),s("p",[e._v("Creates a SingularMonitoredSession.")]),e._v(" "),s("h4",{attrs:{id:"args"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("hooks")]),e._v(": An iterable of `SessionRunHook' objects.")]),e._v(" "),s("li",[s("code",[e._v("scaffold")]),e._v(": A "),s("code",[e._v("Scaffold")]),e._v(" used for gathering or building supportive ops. If not specified a default one is created. It's used to finalize the graph.")]),e._v(" "),s("li",[s("code",[e._v("master")]),e._v(": "),s("code",[e._v("String")]),e._v(" representation of the TensorFlow "),s("code",[e._v("master")]),e._v(" to use.")]),e._v(" "),s("li",[s("code",[e._v("config")]),e._v(": "),s("code",[e._v("ConfigProto")]),e._v(" proto used to "),s("code",[e._v("config")]),e._v("ure the session.")]),e._v(" "),s("li",[s("code",[e._v("checkpoint_dir")]),e._v(": A string. Optional path to a directory where to restore variables.")]),e._v(" "),s("li",[s("code",[e._v("stop_grace_period_secs")]),e._v(": Number of seconds given to threads to stop after "),s("code",[e._v("close")]),e._v("() has been called.")]),e._v(" "),s("li",[s("code",[e._v("checkpoint_filename_with_path")]),e._v(": A string. Optional path to a checkpoint file from which to restore variables.")])]),e._v(" "),s("h2",{attrs:{id:"child-classes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#child-classes","aria-hidden":"true"}},[e._v("#")]),e._v(" Child Classes")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://www.tensorflow.org/api_docs/python/tf/compat/v1/train/MonitoredSession/StepContext",target:"_blank",rel:"noopener noreferrer"}},[e._v("class StepContext"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),s("h3",{attrs:{id:"graph"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#graph","aria-hidden":"true"}},[e._v("#")]),e._v(" graph")]),e._v(" "),s("p",[e._v("The graph that was launched in this session.")]),e._v(" "),s("h2",{attrs:{id:"methods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[e._v("#")]),e._v(" Methods")]),e._v(" "),s("h3",{attrs:{id:"enter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enter","aria-hidden":"true"}},[e._v("#")]),e._v(" "),s("strong",[e._v("enter")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L855-L856",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" __enter__()\n")])])]),s("h3",{attrs:{id:"exit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exit","aria-hidden":"true"}},[e._v("#")]),e._v(" "),s("strong",[e._v("exit")])]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L858-L863",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" __exit__(\n    exception_type,\n    exception_value,\n    traceback\n)\n")])])]),s("h3",{attrs:{id:"close"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#close","aria-hidden":"true"}},[e._v("#")]),e._v(" close")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L852-L853",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" close()\n")])])]),s("h3",{attrs:{id:"raw-session"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raw-session","aria-hidden":"true"}},[e._v("#")]),e._v(" raw_session")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L1106-L1108",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" raw_session()\n")])])]),s("p",[e._v("Returns underlying TensorFlow.Session object.")]),e._v(" "),s("h3",{attrs:{id:"run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run","aria-hidden":"true"}},[e._v("#")]),e._v(" run")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L736-L754",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" run(\n    fetches,\n    feed_dict=None,\n    options=None,\n    run_metadata=None\n)\n")])])]),s("p",[e._v("Run ops in the monitored session.")]),e._v(" "),s("p",[e._v("This method is completely compatible with the tf.Session.run() method.")]),e._v(" "),s("h4",{attrs:{id:"args-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#args-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("fetches")]),e._v(": Same as "),s("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),s("li",[s("code",[e._v("feed_dict")]),e._v(": Same as "),s("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),s("li",[s("code",[e._v("options")]),e._v(": Same as "),s("code",[e._v("tf.Session.run")]),e._v("().")]),e._v(" "),s("li",[s("code",[e._v("run_metadata")]),e._v(": Same as "),s("code",[e._v("tf.Session.run")]),e._v("().")])]),e._v(" "),s("h4",{attrs:{id:"returns"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),s("p",[e._v("Same as tf.Session.run().")]),e._v(" "),s("h3",{attrs:{id:"run-step-fn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-step-fn","aria-hidden":"true"}},[e._v("#")]),e._v(" run_step_fn")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L756-L810",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" run_step_fn(step_fn)\n")])])]),s("p",[e._v("Run ops using a step function.")]),e._v(" "),s("h4",{attrs:{id:"args-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#args-3","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("step_fn")]),e._v(": A function or a method with a single argument of type "),s("code",[e._v("StepContext")]),e._v(". The function may use methods of the argument to perform computations with access to a raw session. The returned value of the "),s("code",[e._v("step_fn")]),e._v(" will be returned from "),s("code",[e._v("run_step_fn")]),e._v(", unless a stop is requested. In that case, the next "),s("code",[e._v("should_stop")]),e._v(" call will return True. Example usage:")])]),e._v(" "),s("h4",{attrs:{id:"returns-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#returns-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),s("p",[e._v("Returns the returned value of step_fn.")]),e._v(" "),s("h4",{attrs:{id:"raises"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("StopIteration")]),e._v(": if "),s("code",[e._v("step_fn")]),e._v(" has called "),s("code",[e._v("request_stop")]),e._v("(). It may be caught by "),s("code",[e._v("with tf.MonitoredSession")]),e._v("() to close the session.")]),e._v(" "),s("li",[s("code",[e._v("ValueError")]),e._v(": if "),s("code",[e._v("step_fn")]),e._v(" doesn't have a single argument called "),s("code",[e._v("step_context")]),e._v(". It may also optionally have "),s("code",[e._v("self")]),e._v(" for cases when it belongs to an object.")])]),e._v(" "),s("h3",{attrs:{id:"should-stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#should-stop","aria-hidden":"true"}},[e._v("#")]),e._v(" should_stop")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/training/monitored_session.py#L849-L850",target:"_blank",rel:"noopener noreferrer"}},[e._v("View source"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" should_stop()\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);