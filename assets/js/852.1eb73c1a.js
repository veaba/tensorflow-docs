(window.webpackJsonp=window.webpackJsonp||[]).push([[852],{1040:function(e,v,_){"use strict";_.r(v);var o=_(0),t=Object(o.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("Builds a graph operator that runs a replicated TPU computation.")]),e._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v(" tf.compat.v1.tpu.replicate(\n    computation,\n    inputs=None,\n    infeed_queue=None,\n    device_assignment=None,\n    name=None,\n    maximum_shapes=None\n)\n")])])]),_("h4",{attrs:{id:"args"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#args","aria-hidden":"true"}},[e._v("#")]),e._v(" Args:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("computation")]),e._v(": A Python function that builds the "),_("code",[e._v("computation")]),e._v(" to replicate.")]),e._v(" "),_("li",[_("code",[e._v("inputs")]),e._v(": A "),_("code",[e._v("li")]),e._v("st of "),_("code",[e._v("li")]),e._v("sts of "),_("code",[e._v("in``pu")]),e._v("t t"),_("code",[e._v("en")]),e._v("sors or "),_("code",[e._v("None")]),e._v(" (eq"),_("code",[e._v("ui")]),e._v("val"),_("code",[e._v("en")]),e._v("t to ["),_("code",[e._v("[]")]),e._v("]), "),_("code",[e._v("in")]),e._v("dexed by [r"),_("code",[e._v("ep``li")]),e._v("c"),_("code",[e._v("a_``nu")]),e._v("m]["),_("code",[e._v("in``pu")]),e._v("t"),_("code",[e._v("_n``um")]),e._v("]. All r"),_("code",[e._v("ep``li")]),e._v("cas "),_("code",[e._v("mu")]),e._v("st have the s"),_("code",[e._v("am")]),e._v("e "),_("code",[e._v("nu")]),e._v("mber of "),_("code",[e._v("inputs")]),e._v(". Each "),_("code",[e._v("in``pu")]),e._v("t c"),_("code",[e._v("an")]),e._v(" be a nested st"),_("code",[e._v("ru``ct")]),e._v("ure co"),_("code",[e._v("nt``ai``ni")]),e._v("ng va"),_("code",[e._v("lu")]),e._v("es th"),_("code",[e._v("at")]),e._v(" are conve"),_("code",[e._v("rt")]),e._v("ible to t"),_("code",[e._v("en")]),e._v("sors. Note th"),_("code",[e._v("at")]),e._v(" pass"),_("code",[e._v("in")]),e._v("g "),_("code",[e._v("an")]),e._v(" N-d"),_("code",[e._v("im``en")]),e._v("sion "),_("code",[e._v("li")]),e._v("st of co"),_("code",[e._v("mp``at")]),e._v("ible va"),_("code",[e._v("lu")]),e._v("es will resu"),_("code",[e._v("lt")]),e._v(" "),_("code",[e._v("in")]),e._v(" a N-d"),_("code",[e._v("im``en")]),e._v("sion "),_("code",[e._v("li")]),e._v("st of scalar t"),_("code",[e._v("en")]),e._v("sors r"),_("code",[e._v("at")]),e._v("her th"),_("code",[e._v("an")]),e._v(" a s"),_("code",[e._v("in")]),e._v("gle R"),_("code",[e._v("an")]),e._v("k-N t"),_("code",[e._v("en")]),e._v("sors. If you need differ"),_("code",[e._v("en")]),e._v("t behavior, conve"),_("code",[e._v("rt")]),e._v(" pa"),_("code",[e._v("rt")]),e._v(" of "),_("code",[e._v("inputs")]),e._v(" to t"),_("code",[e._v("en")]),e._v("sors w"),_("code",[e._v("it")]),e._v("h "),_("code",[e._v("tf.convert_to_tensor")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("in")]),e._v("feed_qu"),_("code",[e._v("eu")]),e._v("e: If not "),_("code",[e._v("None")]),e._v(", the "),_("code",[e._v("InfeedQueue")]),e._v(" from which to "),_("code",[e._v("ap")]),e._v("p"),_("code",[e._v("en")]),e._v("d a t"),_("code",[e._v("up")]),e._v("le of arg"),_("code",[e._v("um``en")]),e._v("ts as "),_("code",[e._v("inputs")]),e._v(" to "),_("code",[e._v("computation")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("device_assignment")]),e._v(": If not "),_("code",[e._v("None")]),e._v(", a "),_("code",[e._v("DeviceAssignment")]),e._v(" desc"),_("code",[e._v("ri")]),e._v("b"),_("code",[e._v("in")]),e._v("g the m"),_("code",[e._v("ap``pi")]),e._v("ng b"),_("code",[e._v("et")]),e._v("we"),_("code",[e._v("en")]),e._v(" logical cores "),_("code",[e._v("in")]),e._v(" the "),_("code",[e._v("computation")]),e._v(" w"),_("code",[e._v("it")]),e._v("h physical cores "),_("code",[e._v("in")]),e._v(" the TPU topology. Uses a def"),_("code",[e._v("au``lt")]),e._v(" device assig"),_("code",[e._v("nm``en")]),e._v("t if "),_("code",[e._v("None")]),e._v(". The "),_("code",[e._v("DeviceAssignment")]),e._v(" may be o"),_("code",[e._v("mi")]),e._v("tted if each r"),_("code",[e._v("ep``li")]),e._v("ca of the "),_("code",[e._v("computation")]),e._v(" uses only one core, "),_("code",[e._v("an")]),e._v("d there is "),_("code",[e._v("ei")]),e._v("ther only one r"),_("code",[e._v("ep``li")]),e._v("ca, or the "),_("code",[e._v("nu")]),e._v("mber of r"),_("code",[e._v("ep``li")]),e._v("cas is equal to the "),_("code",[e._v("nu")]),e._v("mber of cores "),_("code",[e._v("in")]),e._v(" the TPU syst"),_("code",[e._v("em")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("name")]),e._v(": (D"),_("code",[e._v("ep")]),e._v("rec"),_("code",[e._v("at")]),e._v("ed) Does noth"),_("code",[e._v("in")]),e._v("g.")]),e._v(" "),_("li",[_("code",[e._v("maximum_shapes")]),e._v(": A nested st"),_("code",[e._v("ru``ct")]),e._v("ure of tf.T"),_("code",[e._v("en")]),e._v("sorSh"),_("code",[e._v("ap")]),e._v("e r"),_("code",[e._v("ep")]),e._v("res"),_("code",[e._v("en")]),e._v("t"),_("code",[e._v("in")]),e._v("g the sh"),_("code",[e._v("ap")]),e._v("e to which the respe"),_("code",[e._v("ct")]),e._v("ive co"),_("code",[e._v("mp")]),e._v("on"),_("code",[e._v("en")]),e._v("t of each "),_("code",[e._v("in``pu")]),e._v("t el"),_("code",[e._v("em``en")]),e._v("t "),_("code",[e._v("in")]),e._v(" each r"),_("code",[e._v("ep``li")]),e._v("ca should be padded. Any "),_("code",[e._v("un")]),e._v("known d"),_("code",[e._v("im``en")]),e._v("sions (e.g. tf.co"),_("code",[e._v("mp``at")]),e._v(".v1.D"),_("code",[e._v("im``en")]),e._v("sion("),_("code",[e._v("None")]),e._v(") "),_("code",[e._v("in")]),e._v(" a tf.T"),_("code",[e._v("en")]),e._v("sorSh"),_("code",[e._v("ap")]),e._v("e or -1 "),_("code",[e._v("in")]),e._v(" a t"),_("code",[e._v("en")]),e._v("sor-"),_("code",[e._v("li")]),e._v("ke obje"),_("code",[e._v("ct")]),e._v(") will be padded to the max"),_("code",[e._v("im``um")]),e._v(" size of th"),_("code",[e._v("at")]),e._v(" d"),_("code",[e._v("im``en")]),e._v("sion over all r"),_("code",[e._v("ep``li")]),e._v("cas. The st"),_("code",[e._v("ru``ct")]),e._v("ure of "),_("code",[e._v("maximum_shapes")]),e._v(" needs to be the s"),_("code",[e._v("am")]),e._v("e as "),_("code",[e._v("inputs")]),e._v("[0].")])]),e._v(" "),_("h4",{attrs:{id:"returns"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#returns","aria-hidden":"true"}},[e._v("#")]),e._v(" Returns:")]),e._v(" "),_("p",[e._v("A list of outputs, indexed by [replica_num] each output can be a nested structure same as what computation() returns with a few exceptions.")]),e._v(" "),_("p",[e._v("Exceptions include: 1) None output: a NoOp would be returned which control-depends on computation. 2) Single value output: A tuple containing the value would be returned. 3) Operation-only outputs: a NoOp would be returned which control-depends on computation. TODO(b/121383831): Investigate into removing these special cases.")]),e._v(" "),_("h4",{attrs:{id:"raises"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#raises","aria-hidden":"true"}},[e._v("#")]),e._v(" Raises:")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("ValueError")]),e._v(": If all replicas do not have equal numbers of input tensors.")]),e._v(" "),_("li",[_("code",[e._v("ValueError")]),e._v(": If the number of inputs per replica does not match the number of formal parameters to "),_("code",[e._v("computation")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("ValueError")]),e._v(": If the static "),_("code",[e._v("inputs")]),e._v(" dimensions don't match with the values given in "),_("code",[e._v("maximum_shapes")]),e._v(".")]),e._v(" "),_("li",[_("code",[e._v("ValueError")]),e._v(": If the structure of "),_("code",[e._v("inputs")]),e._v(" per replica does not match the structure of "),_("code",[e._v("maximum_shapes")]),e._v(".")])])])}),[],!1,null,null,null);v.default=t.exports}}]);